import{i as pe,f as yt,u as ue,b as O,c as ke,d as bt,e as D,g as be,h as ht,j as wt,k as kt,l as xt,m as Ct,n as he,V as Tt,v as It,o as St,p as We,q as H,r as Et,_ as xe,s as Ae,w as je,t as _e,x as Bt,T as He,y as Nt,z as Rt,A as De,B as zt,C as $t,E as Mt}from"./el-button-B8eYw6SM.js";import{E as Vt}from"./ExampleBox-DycLTJdB.js";import{c as m,k as qe,s as de,j as N,l as oe,m as le,p as _,q as se,d as U,u as Lt,v as Ft,x as Ze,y as Pt,o as b,a as S,i as C,F as ce,z as x,A as n,B as Z,h,C as E,w as B,D as ne,E as ge,e as V,G as Ye,N as At,t as Y,n as Ce,H as Oe,I as Xe,J as Ge,T as Je,K as _t,L as Qe,M as Ue,f as ye,_ as Ht}from"./index-BDgqJlq8.js";const Dt=()=>pe&&/firefox/i.test(window.navigator.userAgent);function Ot(o){return o==null}const Ut={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},we="update:modelValue",Kt=o=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(o),et=o=>o,Wt=["class","style"],jt=/^on[A-Z]/,qt=(o={})=>{const{excludeListeners:l=!1,excludeKeys:t}=o,e=m(()=>(t?.value||[]).concat(Wt)),a=qe();return a?m(()=>{var i;return yt(Object.entries((i=a.proxy)==null?void 0:i.$attrs).filter(([r])=>!e.value.includes(r)&&!(l&&jt.test(r))))}):m(()=>({}))};function Zt(o){let l;function t(){if(o.value==null)return;const{selectionStart:a,selectionEnd:i,value:r}=o.value;if(a==null||i==null)return;const d=r.slice(0,Math.max(0,a)),p=r.slice(Math.max(0,i));l={selectionStart:a,selectionEnd:i,value:r,beforeTxt:d,afterTxt:p}}function e(){if(o.value==null||l==null)return;const{value:a}=o.value,{beforeTxt:i,afterTxt:r,selectionStart:d}=l;if(i==null||r==null||d==null)return;let p=a.length;if(a.endsWith(r))p=a.length-r.length;else if(a.startsWith(i))p=i.length;else{const y=i[d-1],v=a.indexOf(y,d-1);v!==-1&&(p=v+1)}o.value.setSelectionRange(p,p)}return[t,e]}function Yt(o,{beforeFocus:l,afterFocus:t,beforeBlur:e,afterBlur:a}={}){const i=qe(),{emit:r}=i,d=de(),p=N(!1),y=u=>{le(l)&&l(u)||p.value||(p.value=!0,r("focus",u),t?.())},v=u=>{var w;le(e)&&e(u)||u.relatedTarget&&((w=d.value)!=null&&w.contains(u.relatedTarget))||(p.value=!1,r("blur",u),a?.())},f=()=>{var u,w;(u=d.value)!=null&&u.contains(document.activeElement)&&d.value!==document.activeElement||(w=o.value)==null||w.focus()};return oe(d,u=>{u&&u.setAttribute("tabindex","-1")}),ue(d,"focus",y,!0),ue(d,"blur",v,!0),ue(d,"click",f,!0),{isFocused:p,wrapperRef:d,handleFocus:y,handleBlur:v}}function Xt({afterComposition:o,emit:l}){const t=N(!1),e=d=>{l?.("compositionstart",d),t.value=!0},a=d=>{var p;l?.("compositionupdate",d);const y=(p=d.target)==null?void 0:p.value,v=y[y.length-1]||"";t.value=!Kt(v)},i=d=>{l?.("compositionend",d),t.value&&(t.value=!1,_(()=>o(d)))};return{isComposing:t,handleComposition:d=>{d.type==="compositionend"?i(d):a(d)},handleCompositionStart:e,handleCompositionUpdate:a,handleCompositionEnd:i}}const M={};let z;const Gt=`
  height:0 !important;
  visibility:hidden !important;
  ${Dt()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Jt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Qt(o){const l=window.getComputedStyle(o),t=l.getPropertyValue("box-sizing"),e=Number.parseFloat(l.getPropertyValue("padding-bottom"))+Number.parseFloat(l.getPropertyValue("padding-top")),a=Number.parseFloat(l.getPropertyValue("border-bottom-width"))+Number.parseFloat(l.getPropertyValue("border-top-width"));return{contextStyle:Jt.map(r=>`${r}:${l.getPropertyValue(r)}`).join(";"),paddingSize:e,borderSize:a,boxSizing:t}}function Ke(o,l=1,t){var e;z||(z=document.createElement("textarea"),document.body.appendChild(z));const{paddingSize:a,borderSize:i,boxSizing:r,contextStyle:d}=Qt(o);z.setAttribute("style",`${d};${Gt}`),z.value=o.value||o.placeholder||"";let p=z.scrollHeight;const y={};r==="border-box"?p=p+i:r==="content-box"&&(p=p-a),z.value="";const v=z.scrollHeight-a;if(O(l)){let f=v*l;r==="border-box"&&(f=f+a+i),p=Math.max(f,p),y.minHeight=`${f}px`}if(O(t)){let f=v*t;r==="border-box"&&(f=f+a+i),p=Math.min(f,p)}return y.height=`${p}px`,(e=z.parentNode)==null||e.removeChild(z),z=void 0,y}const en=ke({id:{type:String,default:void 0},size:bt,disabled:Boolean,modelValue:{type:D([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:D([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:be},prefixIcon:{type:be},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:D([Object,Array,String]),default:()=>et({})},autofocus:Boolean,rows:{type:Number,default:2},...ht(["ariaLabel"])}),tn={[we]:o=>se(o),input:o=>se(o),change:o=>se(o),focus:o=>o instanceof FocusEvent,blur:o=>o instanceof FocusEvent,clear:()=>!0,mouseleave:o=>o instanceof MouseEvent,mouseenter:o=>o instanceof MouseEvent,keydown:o=>o instanceof Event,compositionstart:o=>o instanceof CompositionEvent,compositionupdate:o=>o instanceof CompositionEvent,compositionend:o=>o instanceof CompositionEvent},nn=U({name:"ElInput",inheritAttrs:!1}),on=U({...nn,props:en,emits:tn,setup(o,{expose:l,emit:t}){const e=o,a=Lt(),i=Ft(),r=m(()=>{const s={};return e.containerRole==="combobox"&&(s["aria-haspopup"]=a["aria-haspopup"],s["aria-owns"]=a["aria-owns"],s["aria-expanded"]=a["aria-expanded"]),s}),d=m(()=>[e.type==="textarea"?G.b():c.b(),c.m(w.value),c.is("disabled",T.value),c.is("exceed",rt.value),{[c.b("group")]:i.prepend||i.append,[c.m("prefix")]:i.prefix||e.prefixIcon,[c.m("suffix")]:i.suffix||e.suffixIcon||e.clearable||e.showPassword,[c.bm("suffix","password-clear")]:re.value&&fe.value,[c.b("hidden")]:e.type==="hidden"},a.class]),p=m(()=>[c.e("wrapper"),c.is("focus",J.value)]),y=qt({excludeKeys:m(()=>Object.keys(r.value))}),{form:v,formItem:f}=wt(),{inputId:u}=kt(e,{formItemContext:f}),w=xt(),T=Ct(),c=he("input"),G=he("textarea"),K=de(),R=de(),F=N(!1),P=N(!1),A=N(),W=de(e.inputStyle),g=m(()=>K.value||R.value),{wrapperRef:Te,isFocused:J,handleFocus:ot,handleBlur:st}=Yt(g,{beforeFocus(){return T.value},afterBlur(){var s;e.validateEvent&&((s=f?.validate)==null||s.call(f,"blur").catch(k=>Ae()))}}),Ie=m(()=>{var s;return(s=v?.statusIcon)!=null?s:!1}),Q=m(()=>f?.validateState||""),Se=m(()=>Q.value&&Tt[Q.value]),at=m(()=>P.value?It:St),lt=m(()=>[a.style]),Ee=m(()=>[e.inputStyle,W.value,{resize:e.resize}]),L=m(()=>Ot(e.modelValue)?"":String(e.modelValue)),re=m(()=>e.clearable&&!T.value&&!e.readonly&&!!L.value&&(J.value||F.value)),fe=m(()=>e.showPassword&&!T.value&&!!L.value&&(!!L.value||J.value)),j=m(()=>e.showWordLimit&&!!e.maxlength&&(e.type==="text"||e.type==="textarea")&&!T.value&&!e.readonly&&!e.showPassword),me=m(()=>L.value.length),rt=m(()=>!!j.value&&me.value>Number(e.maxlength)),it=m(()=>!!i.suffix||!!e.suffixIcon||re.value||e.showPassword||j.value||!!Q.value&&Ie.value),[ut,dt]=Zt(K);We(R,s=>{if(ct(),!j.value||e.resize!=="both")return;const k=s[0],{width:q}=k.contentRect;A.value={right:`calc(100% - ${q+15+6}px)`}});const ee=()=>{const{type:s,autosize:k}=e;if(!(!pe||s!=="textarea"||!R.value))if(k){const q=Oe(k)?k.minRows:void 0,Fe=Oe(k)?k.maxRows:void 0,Pe=Ke(R.value,q,Fe);W.value={overflowY:"hidden",...Pe},_(()=>{R.value.offsetHeight,W.value=Pe})}else W.value={minHeight:Ke(R.value).minHeight}},ct=(s=>{let k=!1;return()=>{var q;if(k||!e.autosize)return;((q=R.value)==null?void 0:q.offsetParent)===null||(s(),k=!0)}})(ee),te=()=>{const s=g.value,k=e.formatter?e.formatter(L.value):L.value;!s||s.value===k||(s.value=k)},ve=async s=>{ut();let{value:k}=s.target;if(e.formatter&&(k=e.parser?e.parser(k):k),!Ne.value){if(k===L.value){te();return}t(we,k),t("input",k),await _(),te(),dt()}},Be=s=>{t("change",s.target.value)},{isComposing:Ne,handleCompositionStart:Re,handleCompositionUpdate:ze,handleCompositionEnd:$e}=Xt({emit:t,afterComposition:ve}),pt=()=>{P.value=!P.value,Me()},Me=async()=>{var s;await _(),(s=g.value)==null||s.focus()},ft=()=>{var s;return(s=g.value)==null?void 0:s.blur()},mt=s=>{F.value=!1,t("mouseleave",s)},vt=s=>{F.value=!0,t("mouseenter",s)},Ve=s=>{t("keydown",s)},gt=()=>{var s;(s=g.value)==null||s.select()},Le=()=>{t(we,""),t("change",""),t("clear"),t("input","")};return oe(()=>e.modelValue,()=>{var s;_(()=>ee()),e.validateEvent&&((s=f?.validate)==null||s.call(f,"change").catch(k=>Ae()))}),oe(L,()=>te()),oe(()=>e.type,async()=>{await _(),te(),ee()}),Ze(()=>{!e.formatter&&e.parser,te(),_(ee)}),l({input:K,textarea:R,ref:g,textareaStyle:Ee,autosize:Pt(e,"autosize"),isComposing:Ne,focus:Me,blur:ft,select:gt,clear:Le,resizeTextarea:ee}),(s,k)=>(b(),S("div",ge(n(r),{class:[n(d),{[n(c).bm("group","append")]:s.$slots.append,[n(c).bm("group","prepend")]:s.$slots.prepend}],style:n(lt),role:s.containerRole,onMouseenter:vt,onMouseleave:mt}),[C(" input "),s.type!=="textarea"?(b(),S(ce,{key:0},[C(" prepend slot "),s.$slots.prepend?(b(),S("div",{key:0,class:x(n(c).be("group","prepend"))},[Z(s.$slots,"prepend")],2)):C("v-if",!0),h("div",{ref_key:"wrapperRef",ref:Te,class:x(n(p))},[C(" prefix slot "),s.$slots.prefix||s.prefixIcon?(b(),S("span",{key:0,class:x(n(c).e("prefix"))},[h("span",{class:x(n(c).e("prefix-inner"))},[Z(s.$slots,"prefix"),s.prefixIcon?(b(),E(n(H),{key:0,class:x(n(c).e("icon"))},{default:B(()=>[(b(),E(ne(s.prefixIcon)))]),_:1},8,["class"])):C("v-if",!0)],2)],2)):C("v-if",!0),h("input",ge({id:n(u),ref_key:"input",ref:K,class:n(c).e("inner")},n(y),{minlength:s.minlength,maxlength:s.maxlength,type:s.showPassword?P.value?"text":"password":s.type,disabled:n(T),readonly:s.readonly,autocomplete:s.autocomplete,tabindex:s.tabindex,"aria-label":s.ariaLabel,placeholder:s.placeholder,style:s.inputStyle,form:s.form,autofocus:s.autofocus,onCompositionstart:n(Re),onCompositionupdate:n(ze),onCompositionend:n($e),onInput:ve,onChange:Be,onKeydown:Ve}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","onCompositionstart","onCompositionupdate","onCompositionend"]),C(" suffix slot "),n(it)?(b(),S("span",{key:1,class:x(n(c).e("suffix"))},[h("span",{class:x(n(c).e("suffix-inner"))},[!n(re)||!n(fe)||!n(j)?(b(),S(ce,{key:0},[Z(s.$slots,"suffix"),s.suffixIcon?(b(),E(n(H),{key:0,class:x(n(c).e("icon"))},{default:B(()=>[(b(),E(ne(s.suffixIcon)))]),_:1},8,["class"])):C("v-if",!0)],64)):C("v-if",!0),n(re)?(b(),E(n(H),{key:1,class:x([n(c).e("icon"),n(c).e("clear")]),onMousedown:Ye(n(At),["prevent"]),onClick:Le},{default:B(()=>[V(n(Et))]),_:1},8,["class","onMousedown"])):C("v-if",!0),n(fe)?(b(),E(n(H),{key:2,class:x([n(c).e("icon"),n(c).e("password")]),onClick:pt},{default:B(()=>[(b(),E(ne(n(at))))]),_:1},8,["class"])):C("v-if",!0),n(j)?(b(),S("span",{key:3,class:x(n(c).e("count"))},[h("span",{class:x(n(c).e("count-inner"))},Y(n(me))+" / "+Y(s.maxlength),3)],2)):C("v-if",!0),n(Q)&&n(Se)&&n(Ie)?(b(),E(n(H),{key:4,class:x([n(c).e("icon"),n(c).e("validateIcon"),n(c).is("loading",n(Q)==="validating")])},{default:B(()=>[(b(),E(ne(n(Se))))]),_:1},8,["class"])):C("v-if",!0)],2)],2)):C("v-if",!0)],2),C(" append slot "),s.$slots.append?(b(),S("div",{key:1,class:x(n(c).be("group","append"))},[Z(s.$slots,"append")],2)):C("v-if",!0)],64)):(b(),S(ce,{key:1},[C(" textarea "),h("textarea",ge({id:n(u),ref_key:"textarea",ref:R,class:[n(G).e("inner"),n(c).is("focus",n(J))]},n(y),{minlength:s.minlength,maxlength:s.maxlength,tabindex:s.tabindex,disabled:n(T),readonly:s.readonly,autocomplete:s.autocomplete,style:n(Ee),"aria-label":s.ariaLabel,placeholder:s.placeholder,form:s.form,autofocus:s.autofocus,rows:s.rows,onCompositionstart:n(Re),onCompositionupdate:n(ze),onCompositionend:n($e),onInput:ve,onFocus:n(ot),onBlur:n(st),onChange:Be,onKeydown:Ve}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),n(j)?(b(),S("span",{key:0,style:Ce(A.value),class:x(n(c).e("count"))},Y(n(me))+" / "+Y(s.maxlength),7)):C("v-if",!0)],64))],16,["role"]))}});var sn=xe(on,[["__file","input.vue"]]);const an=je(sn),ln=ke({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:D([String,Object,Array])},offset:{type:D(Array),default:[0,0]},badgeClass:{type:String}}),rn=U({name:"ElBadge"}),un=U({...rn,props:ln,setup(o,{expose:l}){const t=o,e=he("badge"),a=m(()=>t.isDot?"":O(t.value)&&O(t.max)?t.max<t.value?`${t.max}+`:`${t.value}`:`${t.value}`),i=m(()=>{var r,d,p,y,v;return[{backgroundColor:t.color,marginRight:_e(-((d=(r=t.offset)==null?void 0:r[0])!=null?d:0)),marginTop:_e((y=(p=t.offset)==null?void 0:p[1])!=null?y:0)},(v=t.badgeStyle)!=null?v:{}]});return l({content:a}),(r,d)=>(b(),S("div",{class:x(n(e).b())},[Z(r.$slots,"default"),V(Je,{name:`${n(e).namespace.value}-zoom-in-center`,persisted:""},{default:B(()=>[Xe(h("sup",{class:x([n(e).e("content"),n(e).em("content",r.type),n(e).is("fixed",!!r.$slots.default),n(e).is("dot",r.isDot),n(e).is("hide-zero",!r.showZero&&t.value===0),r.badgeClass]),style:Ce(n(i)),textContent:Y(n(a))},null,14,["textContent"]),[[Ge,!r.hidden&&(n(a)||r.isDot)]])]),_:1},8,["name"])],2))}});var dn=xe(un,[["__file","badge.vue"]]);const cn=je(dn),tt=["success","info","warning","error"],I=et({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:pe?document.body:void 0}),pn=ke({customClass:{type:String,default:I.customClass},center:{type:Boolean,default:I.center},dangerouslyUseHTMLString:{type:Boolean,default:I.dangerouslyUseHTMLString},duration:{type:Number,default:I.duration},icon:{type:be,default:I.icon},id:{type:String,default:I.id},message:{type:D([String,Object,Function]),default:I.message},onClose:{type:D(Function),default:I.onClose},showClose:{type:Boolean,default:I.showClose},type:{type:String,values:tt,default:I.type},plain:{type:Boolean,default:I.plain},offset:{type:Number,default:I.offset},zIndex:{type:Number,default:I.zIndex},grouping:{type:Boolean,default:I.grouping},repeatNum:{type:Number,default:I.repeatNum}}),fn={destroy:()=>!0},$=_t([]),mn=o=>{const l=$.findIndex(a=>a.id===o),t=$[l];let e;return l>0&&(e=$[l-1]),{current:t,prev:e}},vn=o=>{const{prev:l}=mn(o);return l?l.vm.exposed.bottom.value:0},gn=(o,l)=>$.findIndex(e=>e.id===o)>0?16:l,yn=U({name:"ElMessage"}),bn=U({...yn,props:pn,emits:fn,setup(o,{expose:l}){const t=o,{Close:e}=Nt,{ns:a,zIndex:i}=Bt("message"),{currentZIndex:r,nextZIndex:d}=i,p=N(),y=N(!1),v=N(0);let f;const u=m(()=>t.type?t.type==="error"?"danger":t.type:"info"),w=m(()=>{const g=t.type;return{[a.bm("icon",g)]:g&&He[g]}}),T=m(()=>t.icon||He[t.type]||""),c=m(()=>vn(t.id)),G=m(()=>gn(t.id,t.offset)+c.value),K=m(()=>v.value+G.value),R=m(()=>({top:`${G.value}px`,zIndex:r.value}));function F(){t.duration!==0&&({stop:f}=Rt(()=>{A()},t.duration))}function P(){f?.()}function A(){y.value=!1}function W({code:g}){g===Ut.esc&&A()}return Ze(()=>{F(),d(),y.value=!0}),oe(()=>t.repeatNum,()=>{P(),F()}),ue(document,"keydown",W),We(p,()=>{v.value=p.value.getBoundingClientRect().height}),l({visible:y,bottom:K,close:A}),(g,Te)=>(b(),E(Je,{name:n(a).b("fade"),onBeforeLeave:g.onClose,onAfterLeave:J=>g.$emit("destroy"),persisted:""},{default:B(()=>[Xe(h("div",{id:g.id,ref_key:"messageRef",ref:p,class:x([n(a).b(),{[n(a).m(g.type)]:g.type},n(a).is("center",g.center),n(a).is("closable",g.showClose),n(a).is("plain",g.plain),g.customClass]),style:Ce(n(R)),role:"alert",onMouseenter:P,onMouseleave:F},[g.repeatNum>1?(b(),E(n(cn),{key:0,value:g.repeatNum,type:n(u),class:x(n(a).e("badge"))},null,8,["value","type","class"])):C("v-if",!0),n(T)?(b(),E(n(H),{key:1,class:x([n(a).e("icon"),n(w)])},{default:B(()=>[(b(),E(ne(n(T))))]),_:1},8,["class"])):C("v-if",!0),Z(g.$slots,"default",{},()=>[g.dangerouslyUseHTMLString?(b(),S(ce,{key:1},[C(" Caution here, message could've been compromised, never use user's input as message "),h("p",{class:x(n(a).e("content")),innerHTML:g.message},null,10,["innerHTML"])],2112)):(b(),S("p",{key:0,class:x(n(a).e("content"))},Y(g.message),3))]),g.showClose?(b(),E(n(H),{key:2,class:x(n(a).e("closeBtn")),onClick:Ye(A,["stop"])},{default:B(()=>[V(n(e))]),_:1},8,["class","onClick"])):C("v-if",!0)],46,["id"]),[[Ge,y.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var hn=xe(bn,[["__file","message.vue"]]);let wn=1;const nt=o=>{const l=!o||se(o)||Qe(o)||le(o)?{message:o}:o,t={...I,...l};if(!t.appendTo)t.appendTo=document.body;else if(se(t.appendTo)){let e=document.querySelector(t.appendTo);zt(e)||(e=document.body),t.appendTo=e}return De(M.grouping)&&!t.grouping&&(t.grouping=M.grouping),O(M.duration)&&t.duration===3e3&&(t.duration=M.duration),O(M.offset)&&t.offset===16&&(t.offset=M.offset),De(M.showClose)&&!t.showClose&&(t.showClose=M.showClose),t},kn=o=>{const l=$.indexOf(o);if(l===-1)return;$.splice(l,1);const{handler:t}=o;t.close()},xn=({appendTo:o,...l},t)=>{const e=`message_${wn++}`,a=l.onClose,i=document.createElement("div"),r={...l,id:e,onClose:()=>{a?.(),kn(v)},onDestroy:()=>{Ue(null,i)}},d=V(hn,r,le(r.message)||Qe(r.message)?{default:le(r.message)?r.message:()=>r.message}:null);d.appContext=t||X._context,Ue(d,i),o.appendChild(i.firstElementChild);const p=d.component,v={id:e,vnode:d,vm:p,handler:{close:()=>{p.exposed.visible.value=!1}},props:d.component.props};return v},X=(o={},l)=>{if(!pe)return{close:()=>{}};const t=nt(o);if(t.grouping&&$.length){const a=$.find(({vnode:i})=>{var r;return((r=i.props)==null?void 0:r.message)===t.message});if(a)return a.props.repeatNum+=1,a.props.type=t.type,a.handler}if(O(M.max)&&$.length>=M.max)return{close:()=>{}};const e=xn(t,l);return $.push(e),e.handler};tt.forEach(o=>{X[o]=(l={},t)=>{const e=nt(l);return X({...e,type:o},t)}});function Cn(o){for(const l of $)(!o||o===l.props.type)&&l.handler.close()}X.closeAll=Cn;X._context=null;const ie=$t(X,"$message");function Tn(o,l,t){let e=Array.isArray(o)?o:{length:o},a=0,i=!1;function r(p){for(;p.timeRemaining()>0&&a<e.length&&!i;)l(e[a],a),a++;!i&&a<e.length?requestIdleCallback(r):t&&t(i)}function d(){i=!0}return e.length>0?requestIdleCallback(r):t&&t(i),d}function In(o,l,t,e){let a=Array.isArray(o)?o:{length:o},i=0,r=!1;function d(){const y=Math.min(i+l,a.length);for(let v=i;v<y&&!r;v++)t(a[v],v);i=y,!r&&i<a.length?setTimeout(d):e&&e(r)}function p(){r=!0}return a.length>0?setTimeout(d):e&&e(r),p}function Sn(o){return new Worker(""+new URL("fibonacci.worker-rI31KqaK.js",import.meta.url).href,{name:o?.name})}function ae(o){return o<=1?o:ae(o-1)+ae(o-2)}const En={class:"height100"},Bn={class:"gridBox"},Nn={style:{border:"1px solid #cccccc",margin:"0.5em",padding:"0.5em"}},Rn=["disabled"],zn=["disabled"],$n=["disabled"],Mn={style:{display:"flex","align-items":"center"}},Vn=["disabled"],Ln=U({__name:"HeavyTaskBreakdown",setup(o){const l=N(50),t=N(33),e=N(!1),a=N(1);let i;function r(){const f=performance.now();for(let w=0;w<l.value;w++)ae(t.value);const u=performance.now();ie.success(`完成，耗时${u-f}毫秒`)}async function d(){e.value=!0;const f=performance.now();let u=!1;await new Promise(T=>{i=Tn(l.value,()=>{ae(t.value)},c=>{u=c,i=void 0,T(!0)})});const w=performance.now();ie.success((u?"被中断":"完成")+`，耗时${w-f}毫秒`),e.value=!1}async function p(){e.value=!0;let f=!1;const u=performance.now();await new Promise(T=>{i=In(l.value,a.value,()=>{ae(t.value)},c=>{f=c,i=void 0,T(!0)})});const w=performance.now();ie.success((f?"被中断":"完成")+`，耗时${w-u}毫秒`),e.value=!1}async function y(){function f(){i=void 0,e.value=!1;const c=performance.now();ie.success(`完成，耗时${c-u}毫秒`)}e.value=!0;const u=performance.now(),w=new Sn;w.addEventListener("message",f);const T={taskNumber:l.value,fibonacciNumber:t.value};i=()=>{w.terminate(),f()},w.postMessage(T)}function v(){i&&i()}return(f,u)=>{const w=an,T=Mt;return b(),S("div",En,[V(T,null,{default:B(()=>[V(Vt,null,{code:B(()=>u[10]||(u[10]=[h("pre",null,`<div>
  添加
  <el-input type="number" v-model="taskNumber" style="display: inline;width: 250px"></el-input>
  个元素
</div>
<div>立即添加，如果数量比较大，会使UI卡死，空闲时间添加则不会</div>
<button :disabled="taskIsRun" @click="startAppend">立即添加</button>
<button style="margin-left: 2em;margin-right: 2em" :disabled="taskIsRun" @click="appendIdleTime">
  空闲时间Idle添加
</button>
<button style="margin-right: 2em" :disabled="taskIsRun" @click="appendUseTimeout">空闲时间Timeout添加</button>
<button @click="breakTask">中断执行</button>
<div style="height: 300px">
  <el-scrollbar>
    <div ref="rootRef"></div>
  </el-scrollbar>
</div>
import {ref, shallowRef} from "vue";
import {funChunkRun, funTimeoutRun} from "../util/functionUtil";
import ExampleBox from "../components/exampleBox/ExampleBox.vue";

const rootRef = shallowRef<HTMLDivElement>();
const taskNumber = ref(200000);
const taskIsRun = ref(false);

let taskBreaker: Function | undefined = undefined;

function startAppend() {
  rootRef.value!.innerHTML = '';
  for (let i = 0; i < taskNumber.value; i++) {
    const dom = document.createElement('div');
    dom.innerText = i.toString();
    rootRef.value?.append(dom);
  }
  alert('完成');
}

async function appendIdleTime() {
  taskIsRun.value = true;
  rootRef.value!.innerHTML = '';
  let isBreak = false
  await new Promise<boolean>(resolve => {
    taskBreaker = funChunkRun(taskNumber.value, (unused, i) => {
      const dom = document.createElement('div');
      dom.innerText = i.toString();
      rootRef.value?.append(dom);
    }, _isBreak => {
      isBreak = _isBreak;
      taskBreaker = undefined;
      resolve(true);
    })
  });
  alert(isBreak ? '被中断' : '完成');
  taskIsRun.value = false;
}

async function appendUseTimeout() {
  taskIsRun.value = true;
  rootRef.value!.innerHTML = '';
  let isBreak = false
  await new Promise<boolean>(resolve => {
    taskBreaker = funTimeoutRun(taskNumber.value, 300, (unused, i) => {
      const dom = document.createElement('div');
      dom.innerText = i.toString();
      rootRef.value?.append(dom);
    }, _isBreak => {
      isBreak = _isBreak;
      taskBreaker = undefined;
      resolve(true);
    })
  })
  alert(isBreak ? '被中断' : '完成');
  taskIsRun.value = false;
}

function breakTask() {
  taskBreaker && taskBreaker();
}`,-1)])),default:B(()=>[u[11]||(u[11]=h("h3",null,"计算斐波那契数列",-1)),h("div",null,[u[3]||(u[3]=ye(" 计算次数： ")),V(w,{type:"number",modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=c=>l.value=c),modelModifiers:{number:!0},style:{display:"inline",width:"100px"}},null,8,["modelValue"])]),h("div",null,[u[4]||(u[4]=ye(" 计算深度： ")),V(w,{type:"number",modelValue:t.value,"onUpdate:modelValue":u[1]||(u[1]=c=>t.value=c),modelModifiers:{number:!0},style:{display:"inline",width:"100px"}},null,8,["modelValue"])]),u[12]||(u[12]=h("h3",null,"使用主线程计算，计算期间UI会停止响应",-1)),h("button",{onClick:r},"开始计算"),h("div",Bn,[h("div",Nn,[u[6]||(u[6]=h("h3",null,"使用空闲时间计算，如果每次任务耗时较短，则UI不会停止响应。",-1)),u[7]||(u[7]=h("div",null,"但是如果页面主线程一直比较繁忙，则空闲时间几乎会没有（不会执行其中的函数）",-1)),h("button",{disabled:e.value,onClick:d}," 空闲时间计算 ",8,Rn),u[8]||(u[8]=h("h3",null,"使用宏任务分片计算，注意尽量分割任务到17毫秒之内，这样不会影响到每帧的渲染",-1)),h("div",null,[u[5]||(u[5]=ye(" 每次宏任务的计算次数 ")),V(w,{type:"number",modelValue:a.value,"onUpdate:modelValue":u[2]||(u[2]=c=>a.value=c),modelModifiers:{number:!0},style:{display:"inline",width:"100px"}},null,8,["modelValue"])]),h("button",{disabled:e.value,onClick:p},"宏任务分片计算",8,zn),u[9]||(u[9]=h("h3",null,"使用其他线程计算，完全不会影响主线程",-1)),h("button",{disabled:e.value,onClick:y},"使用线程计算",8,$n)]),h("div",Mn,[h("button",{disabled:!e.value,onClick:v},"中断执行",8,Vn)])])]),_:1})]),_:1})])}}}),Hn=Ht(Ln,[["__scopeId","data-v-28d1437a"]]);export{Hn as default};
