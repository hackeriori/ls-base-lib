import{i as fe,f as bt,b as ue,c as W,d as ke,e as ht,h as U,j as wt,k as be,l as Ke,_ as xe,m as Fe,w as je,n as Ae,u as kt,o as xt,p as He,q as Ct,s as Tt,E as It}from"./el-scrollbar-ClfdrSpG.js";import{i as he,u as St,a as Et,b as Bt,c as Nt,V as Rt,v as _t,h as $t,d as O,e as zt,T as De,f as Mt,E as Vt}from"./el-button-BeFPhvFw.js";import{c as v,E as qe,z as de,j as N,G as oe,H as le,q as D,s as se,d as P,I as Lt,J as Pt,K as Ze,L as Ft,o as b,a as S,i as C,F as ce,M as k,A as n,N as L,h as m,O as E,w as B,P as ne,Q as ye,e as M,R as Xe,S as At,t as X,U as Ce,u as Oe,p as Ye,v as Ge,T as Je,V as Ht,W as Qe,X as Ue,f as pe,_ as et}from"./index-CjhpgZF3.js";const Dt=()=>fe&&/firefox/i.test(window.navigator.userAgent);function Ot(o){return o==null}const Ut={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},we="update:modelValue",Wt=o=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(o),tt=o=>o,Kt=["class","style"],jt=/^on[A-Z]/,qt=(o={})=>{const{excludeListeners:l=!1,excludeKeys:t}=o,e=v(()=>(t?.value||[]).concat(Kt)),a=qe();return a?v(()=>{var i;return bt(Object.entries((i=a.proxy)==null?void 0:i.$attrs).filter(([r])=>!e.value.includes(r)&&!(l&&jt.test(r))))}):v(()=>({}))};function Zt(o){let l;function t(){if(o.value==null)return;const{selectionStart:a,selectionEnd:i,value:r}=o.value;if(a==null||i==null)return;const d=r.slice(0,Math.max(0,a)),p=r.slice(Math.max(0,i));l={selectionStart:a,selectionEnd:i,value:r,beforeTxt:d,afterTxt:p}}function e(){if(o.value==null||l==null)return;const{value:a}=o.value,{beforeTxt:i,afterTxt:r,selectionStart:d}=l;if(i==null||r==null||d==null)return;let p=a.length;if(a.endsWith(r))p=a.length-r.length;else if(a.startsWith(i))p=i.length;else{const h=i[d-1],g=a.indexOf(h,d-1);g!==-1&&(p=g+1)}o.value.setSelectionRange(p,p)}return[t,e]}function Xt(o,{beforeFocus:l,afterFocus:t,beforeBlur:e,afterBlur:a}={}){const i=qe(),{emit:r}=i,d=de(),p=N(!1),h=u=>{le(l)&&l(u)||p.value||(p.value=!0,r("focus",u),t?.())},g=u=>{var w;le(e)&&e(u)||u.relatedTarget&&((w=d.value)!=null&&w.contains(u.relatedTarget))||(p.value=!1,r("blur",u),a?.())},f=()=>{var u,w;(u=d.value)!=null&&u.contains(document.activeElement)&&d.value!==document.activeElement||(w=o.value)==null||w.focus()};return oe(d,u=>{u&&u.setAttribute("tabindex","-1")}),ue(d,"focus",h,!0),ue(d,"blur",g,!0),ue(d,"click",f,!0),{isFocused:p,wrapperRef:d,handleFocus:h,handleBlur:g}}function Yt({afterComposition:o,emit:l}){const t=N(!1),e=d=>{l?.("compositionstart",d),t.value=!0},a=d=>{var p;l?.("compositionupdate",d);const h=(p=d.target)==null?void 0:p.value,g=h[h.length-1]||"";t.value=!Wt(g)},i=d=>{l?.("compositionend",d),t.value&&(t.value=!1,D(()=>o(d)))};return{isComposing:t,handleComposition:d=>{d.type==="compositionend"?i(d):a(d)},handleCompositionStart:e,handleCompositionUpdate:a,handleCompositionEnd:i}}const z={};let _;const Gt=`
  height:0 !important;
  visibility:hidden !important;
  ${Dt()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Jt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Qt(o){const l=window.getComputedStyle(o),t=l.getPropertyValue("box-sizing"),e=Number.parseFloat(l.getPropertyValue("padding-bottom"))+Number.parseFloat(l.getPropertyValue("padding-top")),a=Number.parseFloat(l.getPropertyValue("border-bottom-width"))+Number.parseFloat(l.getPropertyValue("border-top-width"));return{contextStyle:Jt.map(r=>`${r}:${l.getPropertyValue(r)}`).join(";"),paddingSize:e,borderSize:a,boxSizing:t}}function We(o,l=1,t){var e;_||(_=document.createElement("textarea"),document.body.appendChild(_));const{paddingSize:a,borderSize:i,boxSizing:r,contextStyle:d}=Qt(o);_.setAttribute("style",`${d};${Gt}`),_.value=o.value||o.placeholder||"";let p=_.scrollHeight;const h={};r==="border-box"?p=p+i:r==="content-box"&&(p=p-a),_.value="";const g=_.scrollHeight-a;if(W(l)){let f=g*l;r==="border-box"&&(f=f+a+i),p=Math.max(f,p),h.minHeight=`${f}px`}if(W(t)){let f=g*t;r==="border-box"&&(f=f+a+i),p=Math.min(f,p)}return h.height=`${p}px`,(e=_.parentNode)==null||e.removeChild(_),_=void 0,h}const en=ke({id:{type:String,default:void 0},size:ht,disabled:Boolean,modelValue:{type:U([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:U([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:he},prefixIcon:{type:he},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:U([Object,Array,String]),default:()=>tt({})},autofocus:Boolean,rows:{type:Number,default:2},...wt(["ariaLabel"])}),tn={[we]:o=>se(o),input:o=>se(o),change:o=>se(o),focus:o=>o instanceof FocusEvent,blur:o=>o instanceof FocusEvent,clear:()=>!0,mouseleave:o=>o instanceof MouseEvent,mouseenter:o=>o instanceof MouseEvent,keydown:o=>o instanceof Event,compositionstart:o=>o instanceof CompositionEvent,compositionupdate:o=>o instanceof CompositionEvent,compositionend:o=>o instanceof CompositionEvent},nn=P({name:"ElInput",inheritAttrs:!1}),on=P({...nn,props:en,emits:tn,setup(o,{expose:l,emit:t}){const e=o,a=Lt(),i=Pt(),r=v(()=>{const s={};return e.containerRole==="combobox"&&(s["aria-haspopup"]=a["aria-haspopup"],s["aria-owns"]=a["aria-owns"],s["aria-expanded"]=a["aria-expanded"]),s}),d=v(()=>[e.type==="textarea"?G.b():c.b(),c.m(w.value),c.is("disabled",T.value),c.is("exceed",it.value),{[c.b("group")]:i.prepend||i.append,[c.m("prefix")]:i.prefix||e.prefixIcon,[c.m("suffix")]:i.suffix||e.suffixIcon||e.clearable||e.showPassword,[c.bm("suffix","password-clear")]:re.value&&me.value,[c.b("hidden")]:e.type==="hidden"},a.class]),p=v(()=>[c.e("wrapper"),c.is("focus",J.value)]),h=qt({excludeKeys:v(()=>Object.keys(r.value))}),{form:g,formItem:f}=St(),{inputId:u}=Et(e,{formItemContext:f}),w=Bt(),T=Nt(),c=be("input"),G=be("textarea"),K=de(),R=de(),F=N(!1),A=N(!1),H=N(),j=de(e.inputStyle),y=v(()=>K.value||R.value),{wrapperRef:Te,isFocused:J,handleFocus:st,handleBlur:at}=Xt(y,{beforeFocus(){return T.value},afterBlur(){var s;e.validateEvent&&((s=f?.validate)==null||s.call(f,"blur").catch(x=>Fe()))}}),Ie=v(()=>{var s;return(s=g?.statusIcon)!=null?s:!1}),Q=v(()=>f?.validateState||""),Se=v(()=>Q.value&&Rt[Q.value]),lt=v(()=>A.value?_t:$t),rt=v(()=>[a.style]),Ee=v(()=>[e.inputStyle,j.value,{resize:e.resize}]),V=v(()=>Ot(e.modelValue)?"":String(e.modelValue)),re=v(()=>e.clearable&&!T.value&&!e.readonly&&!!V.value&&(J.value||F.value)),me=v(()=>e.showPassword&&!T.value&&!!V.value&&(!!V.value||J.value)),q=v(()=>e.showWordLimit&&!!e.maxlength&&(e.type==="text"||e.type==="textarea")&&!T.value&&!e.readonly&&!e.showPassword),ve=v(()=>V.value.length),it=v(()=>!!q.value&&ve.value>Number(e.maxlength)),ut=v(()=>!!i.suffix||!!e.suffixIcon||re.value||e.showPassword||q.value||!!Q.value&&Ie.value),[dt,ct]=Zt(K);Ke(R,s=>{if(pt(),!q.value||e.resize!=="both")return;const x=s[0],{width:Z}=x.contentRect;H.value={right:`calc(100% - ${Z+15+6}px)`}});const ee=()=>{const{type:s,autosize:x}=e;if(!(!fe||s!=="textarea"||!R.value))if(x){const Z=Oe(x)?x.minRows:void 0,Le=Oe(x)?x.maxRows:void 0,Pe=We(R.value,Z,Le);j.value={overflowY:"hidden",...Pe},D(()=>{R.value.offsetHeight,j.value=Pe})}else j.value={minHeight:We(R.value).minHeight}},pt=(s=>{let x=!1;return()=>{var Z;if(x||!e.autosize)return;((Z=R.value)==null?void 0:Z.offsetParent)===null||(s(),x=!0)}})(ee),te=()=>{const s=y.value,x=e.formatter?e.formatter(V.value):V.value;!s||s.value===x||(s.value=x)},ge=async s=>{dt();let{value:x}=s.target;if(e.formatter&&(x=e.parser?e.parser(x):x),!Ne.value){if(x===V.value){te();return}t(we,x),t("input",x),await D(),te(),ct()}},Be=s=>{t("change",s.target.value)},{isComposing:Ne,handleCompositionStart:Re,handleCompositionUpdate:_e,handleCompositionEnd:$e}=Yt({emit:t,afterComposition:ge}),ft=()=>{A.value=!A.value,ze()},ze=async()=>{var s;await D(),(s=y.value)==null||s.focus()},mt=()=>{var s;return(s=y.value)==null?void 0:s.blur()},vt=s=>{F.value=!1,t("mouseleave",s)},gt=s=>{F.value=!0,t("mouseenter",s)},Me=s=>{t("keydown",s)},yt=()=>{var s;(s=y.value)==null||s.select()},Ve=()=>{t(we,""),t("change",""),t("clear"),t("input","")};return oe(()=>e.modelValue,()=>{var s;D(()=>ee()),e.validateEvent&&((s=f?.validate)==null||s.call(f,"change").catch(x=>Fe()))}),oe(V,()=>te()),oe(()=>e.type,async()=>{await D(),te(),ee()}),Ze(()=>{!e.formatter&&e.parser,te(),D(ee)}),l({input:K,textarea:R,ref:y,textareaStyle:Ee,autosize:Ft(e,"autosize"),isComposing:Ne,focus:ze,blur:mt,select:yt,clear:Ve,resizeTextarea:ee}),(s,x)=>(b(),S("div",ye(n(r),{class:[n(d),{[n(c).bm("group","append")]:s.$slots.append,[n(c).bm("group","prepend")]:s.$slots.prepend}],style:n(rt),role:s.containerRole,onMouseenter:gt,onMouseleave:vt}),[C(" input "),s.type!=="textarea"?(b(),S(ce,{key:0},[C(" prepend slot "),s.$slots.prepend?(b(),S("div",{key:0,class:k(n(c).be("group","prepend"))},[L(s.$slots,"prepend")],2)):C("v-if",!0),m("div",{ref_key:"wrapperRef",ref:Te,class:k(n(p))},[C(" prefix slot "),s.$slots.prefix||s.prefixIcon?(b(),S("span",{key:0,class:k(n(c).e("prefix"))},[m("span",{class:k(n(c).e("prefix-inner"))},[L(s.$slots,"prefix"),s.prefixIcon?(b(),E(n(O),{key:0,class:k(n(c).e("icon"))},{default:B(()=>[(b(),E(ne(s.prefixIcon)))]),_:1},8,["class"])):C("v-if",!0)],2)],2)):C("v-if",!0),m("input",ye({id:n(u),ref_key:"input",ref:K,class:n(c).e("inner")},n(h),{minlength:s.minlength,maxlength:s.maxlength,type:s.showPassword?A.value?"text":"password":s.type,disabled:n(T),readonly:s.readonly,autocomplete:s.autocomplete,tabindex:s.tabindex,"aria-label":s.ariaLabel,placeholder:s.placeholder,style:s.inputStyle,form:s.form,autofocus:s.autofocus,onCompositionstart:n(Re),onCompositionupdate:n(_e),onCompositionend:n($e),onInput:ge,onChange:Be,onKeydown:Me}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","onCompositionstart","onCompositionupdate","onCompositionend"]),C(" suffix slot "),n(ut)?(b(),S("span",{key:1,class:k(n(c).e("suffix"))},[m("span",{class:k(n(c).e("suffix-inner"))},[!n(re)||!n(me)||!n(q)?(b(),S(ce,{key:0},[L(s.$slots,"suffix"),s.suffixIcon?(b(),E(n(O),{key:0,class:k(n(c).e("icon"))},{default:B(()=>[(b(),E(ne(s.suffixIcon)))]),_:1},8,["class"])):C("v-if",!0)],64)):C("v-if",!0),n(re)?(b(),E(n(O),{key:1,class:k([n(c).e("icon"),n(c).e("clear")]),onMousedown:Xe(n(At),["prevent"]),onClick:Ve},{default:B(()=>[M(n(zt))]),_:1},8,["class","onMousedown"])):C("v-if",!0),n(me)?(b(),E(n(O),{key:2,class:k([n(c).e("icon"),n(c).e("password")]),onClick:ft},{default:B(()=>[(b(),E(ne(n(lt))))]),_:1},8,["class"])):C("v-if",!0),n(q)?(b(),S("span",{key:3,class:k(n(c).e("count"))},[m("span",{class:k(n(c).e("count-inner"))},X(n(ve))+" / "+X(s.maxlength),3)],2)):C("v-if",!0),n(Q)&&n(Se)&&n(Ie)?(b(),E(n(O),{key:4,class:k([n(c).e("icon"),n(c).e("validateIcon"),n(c).is("loading",n(Q)==="validating")])},{default:B(()=>[(b(),E(ne(n(Se))))]),_:1},8,["class"])):C("v-if",!0)],2)],2)):C("v-if",!0)],2),C(" append slot "),s.$slots.append?(b(),S("div",{key:1,class:k(n(c).be("group","append"))},[L(s.$slots,"append")],2)):C("v-if",!0)],64)):(b(),S(ce,{key:1},[C(" textarea "),m("textarea",ye({id:n(u),ref_key:"textarea",ref:R,class:[n(G).e("inner"),n(c).is("focus",n(J))]},n(h),{minlength:s.minlength,maxlength:s.maxlength,tabindex:s.tabindex,disabled:n(T),readonly:s.readonly,autocomplete:s.autocomplete,style:n(Ee),"aria-label":s.ariaLabel,placeholder:s.placeholder,form:s.form,autofocus:s.autofocus,rows:s.rows,onCompositionstart:n(Re),onCompositionupdate:n(_e),onCompositionend:n($e),onInput:ge,onFocus:n(st),onBlur:n(at),onChange:Be,onKeydown:Me}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),n(q)?(b(),S("span",{key:0,style:Ce(H.value),class:k(n(c).e("count"))},X(n(ve))+" / "+X(s.maxlength),7)):C("v-if",!0)],64))],16,["role"]))}});var sn=xe(on,[["__file","input.vue"]]);const an=je(sn),ln=ke({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:U([String,Object,Array])},offset:{type:U(Array),default:[0,0]},badgeClass:{type:String}}),rn=P({name:"ElBadge"}),un=P({...rn,props:ln,setup(o,{expose:l}){const t=o,e=be("badge"),a=v(()=>t.isDot?"":W(t.value)&&W(t.max)?t.max<t.value?`${t.max}+`:`${t.value}`:`${t.value}`),i=v(()=>{var r,d,p,h,g;return[{backgroundColor:t.color,marginRight:Ae(-((d=(r=t.offset)==null?void 0:r[0])!=null?d:0)),marginTop:Ae((h=(p=t.offset)==null?void 0:p[1])!=null?h:0)},(g=t.badgeStyle)!=null?g:{}]});return l({content:a}),(r,d)=>(b(),S("div",{class:k(n(e).b())},[L(r.$slots,"default"),M(Je,{name:`${n(e).namespace.value}-zoom-in-center`,persisted:""},{default:B(()=>[Ye(m("sup",{class:k([n(e).e("content"),n(e).em("content",r.type),n(e).is("fixed",!!r.$slots.default),n(e).is("dot",r.isDot),n(e).is("hide-zero",!r.showZero&&t.value===0),r.badgeClass]),style:Ce(n(i)),textContent:X(n(a))},null,14,["textContent"]),[[Ge,!r.hidden&&(n(a)||r.isDot)]])]),_:1},8,["name"])],2))}});var dn=xe(un,[["__file","badge.vue"]]);const cn=je(dn),nt=["success","info","warning","error"],I=tt({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:fe?document.body:void 0}),pn=ke({customClass:{type:String,default:I.customClass},center:{type:Boolean,default:I.center},dangerouslyUseHTMLString:{type:Boolean,default:I.dangerouslyUseHTMLString},duration:{type:Number,default:I.duration},icon:{type:he,default:I.icon},id:{type:String,default:I.id},message:{type:U([String,Object,Function]),default:I.message},onClose:{type:U(Function),default:I.onClose},showClose:{type:Boolean,default:I.showClose},type:{type:String,values:nt,default:I.type},plain:{type:Boolean,default:I.plain},offset:{type:Number,default:I.offset},zIndex:{type:Number,default:I.zIndex},grouping:{type:Boolean,default:I.grouping},repeatNum:{type:Number,default:I.repeatNum}}),fn={destroy:()=>!0},$=Ht([]),mn=o=>{const l=$.findIndex(a=>a.id===o),t=$[l];let e;return l>0&&(e=$[l-1]),{current:t,prev:e}},vn=o=>{const{prev:l}=mn(o);return l?l.vm.exposed.bottom.value:0},gn=(o,l)=>$.findIndex(e=>e.id===o)>0?16:l,yn=P({name:"ElMessage"}),bn=P({...yn,props:pn,emits:fn,setup(o,{expose:l}){const t=o,{Close:e}=Mt,{ns:a,zIndex:i}=kt("message"),{currentZIndex:r,nextZIndex:d}=i,p=N(),h=N(!1),g=N(0);let f;const u=v(()=>t.type?t.type==="error"?"danger":t.type:"info"),w=v(()=>{const y=t.type;return{[a.bm("icon",y)]:y&&De[y]}}),T=v(()=>t.icon||De[t.type]||""),c=v(()=>vn(t.id)),G=v(()=>gn(t.id,t.offset)+c.value),K=v(()=>g.value+G.value),R=v(()=>({top:`${G.value}px`,zIndex:r.value}));function F(){t.duration!==0&&({stop:f}=xt(()=>{H()},t.duration))}function A(){f?.()}function H(){h.value=!1}function j({code:y}){y===Ut.esc&&H()}return Ze(()=>{F(),d(),h.value=!0}),oe(()=>t.repeatNum,()=>{A(),F()}),ue(document,"keydown",j),Ke(p,()=>{g.value=p.value.getBoundingClientRect().height}),l({visible:h,bottom:K,close:H}),(y,Te)=>(b(),E(Je,{name:n(a).b("fade"),onBeforeLeave:y.onClose,onAfterLeave:J=>y.$emit("destroy"),persisted:""},{default:B(()=>[Ye(m("div",{id:y.id,ref_key:"messageRef",ref:p,class:k([n(a).b(),{[n(a).m(y.type)]:y.type},n(a).is("center",y.center),n(a).is("closable",y.showClose),n(a).is("plain",y.plain),y.customClass]),style:Ce(n(R)),role:"alert",onMouseenter:A,onMouseleave:F},[y.repeatNum>1?(b(),E(n(cn),{key:0,value:y.repeatNum,type:n(u),class:k(n(a).e("badge"))},null,8,["value","type","class"])):C("v-if",!0),n(T)?(b(),E(n(O),{key:1,class:k([n(a).e("icon"),n(w)])},{default:B(()=>[(b(),E(ne(n(T))))]),_:1},8,["class"])):C("v-if",!0),L(y.$slots,"default",{},()=>[y.dangerouslyUseHTMLString?(b(),S(ce,{key:1},[C(" Caution here, message could've been compromised, never use user's input as message "),m("p",{class:k(n(a).e("content")),innerHTML:y.message},null,10,["innerHTML"])],2112)):(b(),S("p",{key:0,class:k(n(a).e("content"))},X(y.message),3))]),y.showClose?(b(),E(n(O),{key:2,class:k(n(a).e("closeBtn")),onClick:Xe(H,["stop"])},{default:B(()=>[M(n(e))]),_:1},8,["class","onClick"])):C("v-if",!0)],46,["id"]),[[Ge,h.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var hn=xe(bn,[["__file","message.vue"]]);let wn=1;const ot=o=>{const l=!o||se(o)||Qe(o)||le(o)?{message:o}:o,t={...I,...l};if(!t.appendTo)t.appendTo=document.body;else if(se(t.appendTo)){let e=document.querySelector(t.appendTo);Ct(e)||(e=document.body),t.appendTo=e}return He(z.grouping)&&!t.grouping&&(t.grouping=z.grouping),W(z.duration)&&t.duration===3e3&&(t.duration=z.duration),W(z.offset)&&t.offset===16&&(t.offset=z.offset),He(z.showClose)&&!t.showClose&&(t.showClose=z.showClose),t},kn=o=>{const l=$.indexOf(o);if(l===-1)return;$.splice(l,1);const{handler:t}=o;t.close()},xn=({appendTo:o,...l},t)=>{const e=`message_${wn++}`,a=l.onClose,i=document.createElement("div"),r={...l,id:e,onClose:()=>{a?.(),kn(g)},onDestroy:()=>{Ue(null,i)}},d=M(hn,r,le(r.message)||Qe(r.message)?{default:le(r.message)?r.message:()=>r.message}:null);d.appContext=t||Y._context,Ue(d,i),o.appendChild(i.firstElementChild);const p=d.component,g={id:e,vnode:d,vm:p,handler:{close:()=>{p.exposed.visible.value=!1}},props:d.component.props};return g},Y=(o={},l)=>{if(!fe)return{close:()=>{}};const t=ot(o);if(t.grouping&&$.length){const a=$.find(({vnode:i})=>{var r;return((r=i.props)==null?void 0:r.message)===t.message});if(a)return a.props.repeatNum+=1,a.props.type=t.type,a.handler}if(W(z.max)&&$.length>=z.max)return{close:()=>{}};const e=xn(t,l);return $.push(e),e.handler};nt.forEach(o=>{Y[o]=(l={},t)=>{const e=ot(l);return Y({...e,type:o},t)}});function Cn(o){for(const l of $)(!o||o===l.props.type)&&l.handler.close()}Y.closeAll=Cn;Y._context=null;const ie=Tt(Y,"$message");function Tn(o,l,t){let e=Array.isArray(o)?o:{length:o},a=0,i=!1;function r(p){for(;p.timeRemaining()>0&&a<e.length&&!i;)l(e[a],a),a++;!i&&a<e.length?requestIdleCallback(r):t&&t(i)}function d(){i=!0}return e.length>0?requestIdleCallback(r):t&&t(i),d}function In(o,l,t,e){let a=Array.isArray(o)?o:{length:o},i=0,r=!1;function d(){const h=Math.min(i+l,a.length);for(let g=i;g<h&&!r;g++)t(a[g],g);i=h,!r&&i<a.length?setTimeout(d):e&&e(r)}function p(){r=!0}return a.length>0?setTimeout(d):e&&e(r),p}const Sn={class:"ls-text-halfLine cardBox"},En={class:"exampleBox"},Bn={class:"ls-flex ls-flex-end"},Nn=P({__name:"ExampleBox",setup(o){const l=N(!1);function t(){l.value=!l.value}return(e,a)=>{const i=Vt;return b(),S("div",Sn,[m("div",En,[L(e.$slots,"default",{},void 0,!0)]),m("div",Bn,[M(i,{onClick:t},{default:B(()=>a[0]||(a[0]=[pe("查看代码")])),_:1})]),m("div",{class:k(["exampleCode",{expanded:l.value}])},[m("div",null,[L(e.$slots,"code",{},void 0,!0)])],2)])}}}),Rn=et(Nn,[["__scopeId","data-v-03bdfd51"]]);function _n(o){return new Worker(""+new URL("fibonacci.worker-rI31KqaK.js",import.meta.url).href,{name:o?.name})}function ae(o){return o<=1?o:ae(o-1)+ae(o-2)}const $n={class:"height100"},zn={class:"gridBox"},Mn={style:{border:"1px solid #cccccc",margin:"0.5em",padding:"0.5em"}},Vn=["disabled"],Ln=["disabled"],Pn=["disabled"],Fn={style:{display:"flex","align-items":"center"}},An=["disabled"],Hn=P({__name:"HeavyTaskBreakdown",setup(o){const l=N(50),t=N(33),e=N(!1),a=N(1);let i;function r(){const f=performance.now();for(let w=0;w<l.value;w++)ae(t.value);const u=performance.now();ie.success(`完成，耗时${u-f}毫秒`)}async function d(){e.value=!0;const f=performance.now();let u=!1;await new Promise(T=>{i=Tn(l.value,()=>{ae(t.value)},c=>{u=c,i=void 0,T(!0)})});const w=performance.now();ie.success((u?"被中断":"完成")+`，耗时${w-f}毫秒`),e.value=!1}async function p(){e.value=!0;let f=!1;const u=performance.now();await new Promise(T=>{i=In(l.value,a.value,()=>{ae(t.value)},c=>{f=c,i=void 0,T(!0)})});const w=performance.now();ie.success((f?"被中断":"完成")+`，耗时${w-u}毫秒`),e.value=!1}async function h(){function f(){i=void 0,e.value=!1;const c=performance.now();ie.success(`完成，耗时${c-u}毫秒`)}e.value=!0;const u=performance.now(),w=new _n;w.addEventListener("message",f);const T={taskNumber:l.value,fibonacciNumber:t.value};i=()=>{w.terminate(),f()},w.postMessage(T)}function g(){i&&i()}return(f,u)=>{const w=an,T=It;return b(),S("div",$n,[M(T,null,{default:B(()=>[M(Rn,null,{code:B(()=>u[10]||(u[10]=[m("pre",null,`<div>
  添加
  <el-input type="number" v-model="taskNumber" style="display: inline;width: 250px"></el-input>
  个元素
</div>
<div>立即添加，如果数量比较大，会使UI卡死，空闲时间添加则不会</div>
<button :disabled="taskIsRun" @click="startAppend">立即添加</button>
<button style="margin-left: 2em;margin-right: 2em" :disabled="taskIsRun" @click="appendIdleTime">
  空闲时间Idle添加
</button>
<button style="margin-right: 2em" :disabled="taskIsRun" @click="appendUseTimeout">空闲时间Timeout添加</button>
<button @click="breakTask">中断执行</button>
<div style="height: 300px">
  <el-scrollbar>
    <div ref="rootRef"></div>
  </el-scrollbar>
</div>
import {ref, shallowRef} from "vue";
import {funChunkRun, funTimeoutRun} from "../util/functionUtil";
import ExampleBox from "../components/exampleBox/ExampleBox.vue";

const rootRef = shallowRef<HTMLDivElement>();
const taskNumber = ref(200000);
const taskIsRun = ref(false);

let taskBreaker: Function | undefined = undefined;

function startAppend() {
  rootRef.value!.innerHTML = '';
  for (let i = 0; i < taskNumber.value; i++) {
    const dom = document.createElement('div');
    dom.innerText = i.toString();
    rootRef.value?.append(dom);
  }
  alert('完成');
}

async function appendIdleTime() {
  taskIsRun.value = true;
  rootRef.value!.innerHTML = '';
  let isBreak = false
  await new Promise<boolean>(resolve => {
    taskBreaker = funChunkRun(taskNumber.value, (unused, i) => {
      const dom = document.createElement('div');
      dom.innerText = i.toString();
      rootRef.value?.append(dom);
    }, _isBreak => {
      isBreak = _isBreak;
      taskBreaker = undefined;
      resolve(true);
    })
  });
  alert(isBreak ? '被中断' : '完成');
  taskIsRun.value = false;
}

async function appendUseTimeout() {
  taskIsRun.value = true;
  rootRef.value!.innerHTML = '';
  let isBreak = false
  await new Promise<boolean>(resolve => {
    taskBreaker = funTimeoutRun(taskNumber.value, 300, (unused, i) => {
      const dom = document.createElement('div');
      dom.innerText = i.toString();
      rootRef.value?.append(dom);
    }, _isBreak => {
      isBreak = _isBreak;
      taskBreaker = undefined;
      resolve(true);
    })
  })
  alert(isBreak ? '被中断' : '完成');
  taskIsRun.value = false;
}

function breakTask() {
  taskBreaker && taskBreaker();
}`,-1)])),default:B(()=>[u[11]||(u[11]=m("h3",null,"计算斐波那契数列",-1)),m("div",null,[u[3]||(u[3]=pe(" 计算次数： ")),M(w,{type:"number",modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=c=>l.value=c),modelModifiers:{number:!0},style:{display:"inline",width:"100px"}},null,8,["modelValue"])]),m("div",null,[u[4]||(u[4]=pe(" 计算深度： ")),M(w,{type:"number",modelValue:t.value,"onUpdate:modelValue":u[1]||(u[1]=c=>t.value=c),modelModifiers:{number:!0},style:{display:"inline",width:"100px"}},null,8,["modelValue"])]),u[12]||(u[12]=m("h3",null,"使用主线程计算，计算期间UI会停止响应",-1)),m("button",{onClick:r},"开始计算"),m("div",zn,[m("div",Mn,[u[6]||(u[6]=m("h3",null,"使用空闲时间计算，如果每次任务耗时较短，则UI不会停止响应。",-1)),u[7]||(u[7]=m("div",null,"但是如果页面主线程一直比较繁忙，则空闲时间几乎会没有（不会执行其中的函数）",-1)),m("button",{disabled:e.value,onClick:d}," 空闲时间计算 ",8,Vn),u[8]||(u[8]=m("h3",null,"使用宏任务分片计算，注意尽量分割任务到17毫秒之内，这样不会影响到每帧的渲染",-1)),m("div",null,[u[5]||(u[5]=pe(" 每次宏任务的计算次数 ")),M(w,{type:"number",modelValue:a.value,"onUpdate:modelValue":u[2]||(u[2]=c=>a.value=c),modelModifiers:{number:!0},style:{display:"inline",width:"100px"}},null,8,["modelValue"])]),m("button",{disabled:e.value,onClick:p},"宏任务分片计算",8,Ln),u[9]||(u[9]=m("h3",null,"使用其他线程计算，完全不会影响主线程",-1)),m("button",{disabled:e.value,onClick:h},"使用线程计算",8,Pn)]),m("div",Fn,[m("button",{disabled:!e.value,onClick:g},"中断执行",8,An)])])]),_:1})]),_:1})])}}}),Kn=et(Hn,[["__scopeId","data-v-28d1437a"]]);export{Kn as default};
