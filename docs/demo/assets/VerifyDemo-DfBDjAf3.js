const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./VuePlayground-BhFO-0Yw.js","./el-scrollbar-yUkWgBiS.js","./index-BTGeHagC.js","./index-B8gh0udY.css","./el-scrollbar-DpxX_Hk5.css","./index-DwL_q3Fa.js","./VuePlayground-BF7xdvhP.css","./TypeScriptCodeViewer-CeCh5Flx.js"])))=>i.map(i=>d[i]);
import{j as _,k as q,l as M,m as G,d as h,n as g,w as O,p as E,e as y,v as H,T as K,q as R,s as D,u as $,x as U,y as Y,z as Z,o as C,a as V,h as i,A as k,f as T,F as J,r as Q,B as W,t as X,C as P,D as p}from"./index-BTGeHagC.js";import{u as ee,r as A,i as te,g as x,a as S,E as le}from"./el-scrollbar-yUkWgBiS.js";function ne(t){let e;const n=_(!1),o=q({...t,originalPosition:"",originalOverflow:"",visible:!1});function a(s){o.text=s}function r(){const s=o.parent,d=l.ns;if(!s.vLoadingAddClassList){let u=s.getAttribute("loading-number");u=Number.parseInt(u)-1,u?s.setAttribute("loading-number",u.toString()):(A(s,d.bm("parent","relative")),s.removeAttribute("loading-number")),A(s,d.bm("parent","hidden"))}m(),c.unmount()}function m(){var s,d;(d=(s=l.$el)==null?void 0:s.parentNode)==null||d.removeChild(l.$el)}function v(){var s;t.beforeClose&&!t.beforeClose()||(n.value=!0,clearTimeout(e),e=setTimeout(b,400),o.visible=!1,(s=t.closed)==null||s.call(t))}function b(){if(!n.value)return;const s=o.parent;n.value=!1,s.vLoadingAddClassList=void 0,r()}const f=h({name:"ElLoading",setup(s,{expose:d}){const{ns:u,zIndex:F}=ee("loading");return d({ns:u,zIndex:F}),()=>{const I=o.spinner||o.svg,j=g("svg",{class:"circular",viewBox:o.svgViewBox?o.svgViewBox:"0 0 50 50",...I?{innerHTML:I}:{}},[g("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),z=o.text?g("p",{class:u.b("text")},[o.text]):void 0;return g(K,{name:u.b("fade"),onAfterLeave:b},{default:O(()=>[E(y("div",{style:{backgroundColor:o.background||""},class:[u.b("mask"),o.customClass,o.fullscreen?"is-fullscreen":""]},[g("div",{class:u.b("spinner")},[j,z])]),[[H,o.visible]])])})}}}),c=M(f),l=c.mount(document.createElement("div"));return{...G(o),setText:a,removeElLoadingChild:m,close:v,handleAfterLeave:b,vm:l,get $el(){return l.$el}}}let L;const oe=function(t={}){if(!te)return;const e=se(t);if(e.fullscreen&&L)return L;const n=ne({...e,closed:()=>{var a;(a=e.closed)==null||a.call(e),e.fullscreen&&(L=void 0)}});re(e,e.parent,n),B(e,e.parent,n),e.parent.vLoadingAddClassList=()=>B(e,e.parent,n);let o=e.parent.getAttribute("loading-number");return o?o=`${Number.parseInt(o)+1}`:o="1",e.parent.setAttribute("loading-number",o),e.parent.appendChild(n.$el),R(()=>n.visible.value=e.visible),e.fullscreen&&(L=n),n},se=t=>{var e,n,o,a;let r;return D(t.target)?r=(e=document.querySelector(t.target))!=null?e:document.body:r=t.target||document.body,{parent:r===document.body||t.body?document.body:r,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:r===document.body&&((n=t.fullscreen)!=null?n:!0),lock:(o=t.lock)!=null?o:!1,customClass:t.customClass||"",visible:(a=t.visible)!=null?a:!0,beforeClose:t.beforeClose,closed:t.closed,target:r}},re=async(t,e,n)=>{const{nextZIndex:o}=n.vm.zIndex||n.vm._.exposed.zIndex,a={};if(t.fullscreen)n.originalPosition.value=x(document.body,"position"),n.originalOverflow.value=x(document.body,"overflow"),a.zIndex=o();else if(t.parent===document.body){n.originalPosition.value=x(document.body,"position"),await R();for(const r of["top","left"]){const m=r==="top"?"scrollTop":"scrollLeft";a[r]=`${t.target.getBoundingClientRect()[r]+document.body[m]+document.documentElement[m]-Number.parseInt(x(document.body,`margin-${r}`),10)}px`}for(const r of["height","width"])a[r]=`${t.target.getBoundingClientRect()[r]}px`}else n.originalPosition.value=x(e,"position");for(const[r,m]of Object.entries(a))n.$el.style[r]=m},B=(t,e,n)=>{const o=n.vm.ns||n.vm._.exposed.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?A(e,o.bm("parent","relative")):S(e,o.bm("parent","relative")),t.fullscreen&&t.lock?S(e,o.bm("parent","hidden")):A(e,o.bm("parent","hidden"))},w=Symbol("ElLoading"),N=(t,e)=>{var n,o,a,r;const m=e.instance,v=s=>$(e.value)?e.value[s]:void 0,b=s=>{const d=D(s)&&m?.[s]||s;return d&&_(d)},f=s=>b(v(s)||t.getAttribute(`element-loading-${Y(s)}`)),c=(n=v("fullscreen"))!=null?n:e.modifiers.fullscreen,l={text:f("text"),svg:f("svg"),svgViewBox:f("svgViewBox"),spinner:f("spinner"),background:f("background"),customClass:f("customClass"),fullscreen:c,target:(o=v("target"))!=null?o:c?void 0:t,body:(a=v("body"))!=null?a:e.modifiers.body,lock:(r=v("lock"))!=null?r:e.modifiers.lock};t[w]={options:l,instance:oe(l)}},ae=(t,e)=>{for(const n of Object.keys(e))U(e[n])&&(e[n].value=t[n])},ie={mounted(t,e){e.value&&N(t,e)},updated(t,e){const n=t[w];e.oldValue!==e.value&&(e.value&&!e.oldValue?N(t,e):e.value&&e.oldValue?$(e.value)&&ae(e.value,n.options):n?.instance.close())},unmounted(t){var e;(e=t[w])==null||e.instance.close(),t[w]=null}},ue={class:"height100",style:{padding:"0.5em","box-sizing":"border-box"}},de={style:{display:"flex","min-height":"165px"}},me=["value"],ce=`// 使用代码验证，在函数体内实现验证逻辑
class testClass{
  twoNumberAddFun(a:number, b:number){
    if(!Number.isFinite(a) || !Number.isFinite(b))
      throw new Error('a and b must be number');
    return a * b;
  }
}`,ve=`// 使用Verify验证，定义参数时验证即完成
const v = new Verify();
class testClass{
  @v.fun()
  twoNumberAddFun(@v.param('required', 'number') a: number, @v.param('required', 'number') b: number){
    return a * b;
  }
}`,pe=h({__name:"VerifyDemo",setup(t){const e=_(!0),n=_(!0),o=P(async()=>{const c=await p(()=>import("./VuePlayground-BhFO-0Yw.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url);return e.value=!1,c.default}),a=P(async()=>{const c=await p(()=>import("./TypeScriptCodeViewer-CeCh5Flx.js"),__vite__mapDeps([7,5,2,3]),import.meta.url);return n.value=!1,c.default}),r={"ls-base-lib":"./lsBaseLib.es.js"},m=[{index:1,title:"必要性和数字类型验证",code:()=>p(()=>import("./NumberVerifyTest-BKqo9Flf.js"),[],import.meta.url)},{index:2,title:"字符串和可选类型验证",code:()=>p(()=>import("./StringVerifyTest-CfmSvR1Y.js"),[],import.meta.url)},{index:3,title:"boolean类型验证",code:()=>p(()=>import("./BooleanVerifyTest-yFpuUsIK.js"),[],import.meta.url)},{index:4,title:"instanceof类型验证",code:()=>p(()=>import("./InstanceofVerifyTest-O5-FhOAD.js"),[],import.meta.url)},{index:5,title:"自定义验证",code:()=>p(()=>import("./CustomVerifyTest-CMigP47K.js"),[],import.meta.url)}],v=_(1),b=Z("");async function f(){const c=m.find(l=>l.index===v.value).code;b.value=(await c()).default}return f(),(c,l)=>{const s=le,d=ie;return C(),V("div",ue,[y(s,null,{default:O(()=>[l[1]||(l[1]=i("h1",null,"验证类Verify",-1)),l[2]||(l[2]=i("h3",null,"背景环境",-1)),l[3]||(l[3]=i("div",null,"当你使用ts完成一个类库后，如何确保在js环境也获得类型校验的功能？考虑如下示例：",-1)),E((C(),V("div",de,[y(k(a),{code:ce,style:{"margin-right":"1em"}}),y(k(a),{code:ve})])),[[d,n.value]]),l[4]||(l[4]=i("div",null,"Verify帮助我们将验证提前到参数定义阶段，省去函数体内验证代码，函数体内写函数本身要实现的功能即可。",-1)),l[5]||(l[5]=i("h3",null,"类型定义",-1)),l[6]||(l[6]=T(" 请移步类型定义页关于")),l[7]||(l[7]=i("a",{target:"_blank",href:"/ls-base-lib/classes/index.Verify.html"},"Verify类",-1)),l[8]||(l[8]=T("部分，和")),l[9]||(l[9]=i("a",{target:"_blank",href:"/ls-base-lib/types/declaration.ParameterSimpleType.html"},"基础验证类型",-1)),l[10]||(l[10]=T("，")),l[11]||(l[11]=i("a",{target:"_blank",href:"/ls-base-lib/types/declaration.ParameterVerifyType.html"},"所有验证类型",-1)),l[12]||(l[12]=i("h3",null,"验证规则",-1)),l[13]||(l[13]=i("ul",null,[i("li",null,"参数验证失败，将直接抛出异常，不会执行方法体。"),i("li",null," 同一个参数，在有多个验证条件的情况下，按从左到右的顺序依次验证，一旦失败将跳过后面的验证。也就是说，可以把基础验证写在前面，这样自定义验证的验证内容就可以省去基础验证内容了。 "),i("li",null," 不要写自相矛盾的验证规则，例如param('number','string')，因为不存在既是数字，又是字符串的值，这样验证必然会抛出错误。 ")],-1)),l[14]||(l[14]=i("h3",null,"验证示例",-1)),E((C(),V("div",null,[E(i("select",{"onUpdate:modelValue":l[0]||(l[0]=u=>v.value=u),style:{"margin-bottom":"1.5em"},onChange:f,name:"examples"},[(C(),V(J,null,Q(m,u=>i("option",{value:u.index},X(u.title),9,me)),64))],544),[[W,v.value]]),y(k(o),{code:b.value,"import-map":r,style:{height:"250px"}},null,8,["code"])])),[[d,e.value]])]),_:1})])}}});export{pe as default};
