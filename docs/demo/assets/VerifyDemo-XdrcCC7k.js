const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./VuePlayground-DVQHzGoe.js","./el-scrollbar-CL_9NFj3.js","./index-DjQP-RWt.js","./index-Bok4mDZj.css","./el-scrollbar-DpxX_Hk5.css","./index-DwL_q3Fa.js","./VuePlayground-BF7xdvhP.css","./TypeScriptCodeViewer-BhPn-5WS.js"])))=>i.map(i=>d[i]);
import{j as y,k as q,l as M,m as G,d as P,n as p,w as $,p as w,e as L,v as H,T as K,q as O,s as R,u as D,x as U,y as Y,z as Z,o as g,a as C,h as d,A,f as I,F as J,r as Q,B as W,C as X,i as ee,t as te,D as B,E as _}from"./index-DjQP-RWt.js";import{u as le,r as E,i as ne,g as x,a as N,E as se}from"./el-scrollbar-CL_9NFj3.js";function oe(t){let e;const l=y(!1),n=q({...t,originalPosition:"",originalOverflow:"",visible:!1});function a(o){n.text=o}function r(){const o=n.parent,u=s.ns;if(!o.vLoadingAddClassList){let i=o.getAttribute("loading-number");i=Number.parseInt(i)-1,i?o.setAttribute("loading-number",i.toString()):(E(o,u.bm("parent","relative")),o.removeAttribute("loading-number")),E(o,u.bm("parent","hidden"))}c(),m.unmount()}function c(){var o,u;(u=(o=s.$el)==null?void 0:o.parentNode)==null||u.removeChild(s.$el)}function v(){var o;t.beforeClose&&!t.beforeClose()||(l.value=!0,clearTimeout(e),e=setTimeout(b,400),n.visible=!1,(o=t.closed)==null||o.call(t))}function b(){if(!l.value)return;const o=n.parent;l.value=!1,o.vLoadingAddClassList=void 0,r()}const f=P({name:"ElLoading",setup(o,{expose:u}){const{ns:i,zIndex:F}=le("loading");return u({ns:i,zIndex:F}),()=>{const T=n.spinner||n.svg,j=p("svg",{class:"circular",viewBox:n.svgViewBox?n.svgViewBox:"0 0 50 50",...T?{innerHTML:T}:{}},[p("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),z=n.text?p("p",{class:i.b("text")},[n.text]):void 0;return p(K,{name:i.b("fade"),onAfterLeave:b},{default:$(()=>[w(L("div",{style:{backgroundColor:n.background||""},class:[i.b("mask"),n.customClass,n.fullscreen?"is-fullscreen":""]},[p("div",{class:i.b("spinner")},[j,z])]),[[H,n.visible]])])})}}}),m=M(f),s=m.mount(document.createElement("div"));return{...G(n),setText:a,removeElLoadingChild:c,close:v,handleAfterLeave:b,vm:s,get $el(){return s.$el}}}let V;const re=function(t={}){if(!ne)return;const e=ae(t);if(e.fullscreen&&V)return V;const l=oe({...e,closed:()=>{var a;(a=e.closed)==null||a.call(e),e.fullscreen&&(V=void 0)}});ie(e,e.parent,l),S(e,e.parent,l),e.parent.vLoadingAddClassList=()=>S(e,e.parent,l);let n=e.parent.getAttribute("loading-number");return n?n=`${Number.parseInt(n)+1}`:n="1",e.parent.setAttribute("loading-number",n),e.parent.appendChild(l.$el),O(()=>l.visible.value=e.visible),e.fullscreen&&(V=l),l},ae=t=>{var e,l,n,a;let r;return R(t.target)?r=(e=document.querySelector(t.target))!=null?e:document.body:r=t.target||document.body,{parent:r===document.body||t.body?document.body:r,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:r===document.body&&((l=t.fullscreen)!=null?l:!0),lock:(n=t.lock)!=null?n:!1,customClass:t.customClass||"",visible:(a=t.visible)!=null?a:!0,beforeClose:t.beforeClose,closed:t.closed,target:r}},ie=async(t,e,l)=>{const{nextZIndex:n}=l.vm.zIndex||l.vm._.exposed.zIndex,a={};if(t.fullscreen)l.originalPosition.value=x(document.body,"position"),l.originalOverflow.value=x(document.body,"overflow"),a.zIndex=n();else if(t.parent===document.body){l.originalPosition.value=x(document.body,"position"),await O();for(const r of["top","left"]){const c=r==="top"?"scrollTop":"scrollLeft";a[r]=`${t.target.getBoundingClientRect()[r]+document.body[c]+document.documentElement[c]-Number.parseInt(x(document.body,`margin-${r}`),10)}px`}for(const r of["height","width"])a[r]=`${t.target.getBoundingClientRect()[r]}px`}else l.originalPosition.value=x(e,"position");for(const[r,c]of Object.entries(a))l.$el.style[r]=c},S=(t,e,l)=>{const n=l.vm.ns||l.vm._.exposed.ns;["absolute","fixed","sticky"].includes(l.originalPosition.value)?E(e,n.bm("parent","relative")):N(e,n.bm("parent","relative")),t.fullscreen&&t.lock?N(e,n.bm("parent","hidden")):E(e,n.bm("parent","hidden"))},k=Symbol("ElLoading"),h=(t,e)=>{var l,n,a,r;const c=e.instance,v=o=>D(e.value)?e.value[o]:void 0,b=o=>{const u=R(o)&&c?.[o]||o;return u&&y(u)},f=o=>b(v(o)||t.getAttribute(`element-loading-${Y(o)}`)),m=(l=v("fullscreen"))!=null?l:e.modifiers.fullscreen,s={text:f("text"),svg:f("svg"),svgViewBox:f("svgViewBox"),spinner:f("spinner"),background:f("background"),customClass:f("customClass"),fullscreen:m,target:(n=v("target"))!=null?n:m?void 0:t,body:(a=v("body"))!=null?a:e.modifiers.body,lock:(r=v("lock"))!=null?r:e.modifiers.lock};t[k]={options:s,instance:re(s)}},ue=(t,e)=>{for(const l of Object.keys(e))U(e[l])&&(e[l].value=t[l])},de={mounted(t,e){e.value&&h(t,e)},updated(t,e){const l=t[k];e.oldValue!==e.value&&(e.value&&!e.oldValue?h(t,e):e.value&&e.oldValue?D(e.value)&&ue(e.value,l.options):l?.instance.close())},unmounted(t){var e;(e=t[k])==null||e.instance.close(),t[k]=null}},ce={class:"height100",style:{padding:"0.5em","box-sizing":"border-box"}},me={style:{display:"flex","min-height":"165px"}},ve=["value"],fe=`// 使用代码验证，在函数体内实现验证逻辑
class testClass{
  twoNumberAddTestFun(a:number, b:number){
    if(!Number.isFinite(a) || !Number.isFinite(b))
      throw new Error('a and b must be number');
    return a * b;
  }
}`,be=`// 使用Verify验证，定义参数时验证即完成
const v = new Verify();
class testClass{
  @v.fun()
  twoNumberAddTestFun(@v.param('required', 'number') a: number, @v.param('required', 'number') b: number){
    return a * b;
  }
}`,xe=P({__name:"VerifyDemo",setup(t){const e=y(!0),l=y(!0),n=B(async()=>{const m=await _(()=>import("./VuePlayground-DVQHzGoe.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url);return e.value=!1,m.default}),a=B(async()=>{const m=await _(()=>import("./TypeScriptCodeViewer-BhPn-5WS.js"),__vite__mapDeps([7,5,2,3]),import.meta.url);return l.value=!1,m.default}),r={"ls-base-lib":"./lsBaseLib.es.js"},c=[{index:1,title:"必要性和数字类型验证",code:()=>_(()=>import("./NumberVerifyTest-C2OcpnDX.js"),[],import.meta.url)},{index:2,title:"字符串可选类型验证",code:()=>_(()=>import("./StringVerifyTest-BHg23DDP.js"),[],import.meta.url)}],v=y(1),b=Z("");async function f(){const m=c.find(s=>s.index===v.value).code;b.value=(await m()).default}return f(),(m,s)=>{const o=se,u=de;return g(),C("div",ce,[L(o,null,{default:$(()=>[s[1]||(s[1]=d("h1",null,"验证类Verify",-1)),s[2]||(s[2]=d("h3",null,"背景环境",-1)),s[3]||(s[3]=d("div",null,"当你使用ts完成一个类库后，如何确保在js环境也获得类型校验的功能？考虑如下示例：",-1)),w((g(),C("div",me,[L(A(a),{code:fe,style:{"margin-right":"1em"}}),L(A(a),{code:be})])),[[u,l.value]]),s[4]||(s[4]=d("div",null,"Verify帮助我们将验证提前到参数定义阶段，省去函数体内验证代码，函数体内写函数本身要实现的功能即可。",-1)),s[5]||(s[5]=d("h3",null,"类型定义",-1)),s[6]||(s[6]=I(" 请移步类型定义页关于")),s[7]||(s[7]=d("a",{href:"/ls-base-lib/classes/index.Verify.html"},"Verify",-1)),s[8]||(s[8]=I("部分 ")),s[9]||(s[9]=d("h3",null,"验证规则",-1)),s[10]||(s[10]=d("ul",null,[d("li",null,"参数验证失败，将直接抛出异常，不会执行方法体。"),d("li",null," 同一个参数，在有多个验证条件的情况下，按从左到右的顺序依次验证，一旦失败将跳过后面的验证。也就是说，可以把基础验证写在前面，这样自定义验证的验证内容就可以省去基础验证内容了。 "),d("li",null," 不要写自相矛盾的验证规则，例如param('number','string')，因为不存在既是数字，又是字符串的值，这样验证必然会抛出错误。 ")],-1)),s[11]||(s[11]=d("h3",null,"验证示例",-1)),w((g(),C("div",null,[w(d("select",{"onUpdate:modelValue":s[0]||(s[0]=i=>v.value=i),style:{"margin-bottom":"1.5em"},onChange:f},[(g(),C(J,null,Q(c,i=>d("option",{value:i.index},te(i.title),9,ve)),64))],544),[[W,v.value]]),b.value?(g(),X(A(n),{key:0,code:b.value,"import-map":r,style:{height:"250px"}},null,8,["code"])):ee("",!0)])),[[u,e.value]])]),_:1})])}}});export{xe as default};
