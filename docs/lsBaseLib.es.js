function x(t,e,s){return t.slice(0,e)+s+t.slice(e)}function A(t,e="."){const s=t.lastIndexOf(e)+1;return s&&t.substring(s)||void 0}function C(t,e){const s=e||location.search;return new URLSearchParams(s).get(t)}function M(t,e){let s;try{s=new URL(e)}catch{return console.warn(`\u88AB\u66FF\u6362\u7684\u57DF\u540D\u662F\u9519\u8BEF\u7684\uFF1A${e}`),t}let n=new URL(t,e);return n.host=s.host,n.protocol=s.protocol,n.toString()}const R="YYYY-MM-DD HH:mm:ss",D="HH:mm:ss",S="YYYY-MM-DD";function I(t,e){let s=t[e];return s?Array.isArray(s)&&(s=s.filter(n=>n),s.length===0)?null:Array.isArray(s)?s[0]:s:null}class T{injects=[];push(e){return this.injects.push(e),this}getArray(){return this.injects}}function P(t,e,s=!1,n){let o=null,i=!1;const r=function(...c){if(o&&clearTimeout(o),s&&!i){const a=t.apply(this,c);n&&n(a),i=!0}o=setTimeout(()=>{const a=t.apply(this,c);n&&n(a),o=null},e)};return r.cancel=function(){o&&clearTimeout(o),o=null},r}function k(t,e,s){let n=Array.isArray(t)?t:{length:t},o=0,i=!1;function r(a){for(;a.timeRemaining()>0&&o<n.length&&!i;)e(n[o],o),o++;!i&&o<n.length?requestIdleCallback(r):s&&s(i)}function c(){i=!0}return n.length>0?requestIdleCallback(r):s&&s(i),c}function O(t,e,s,n){let o=Array.isArray(t)?t:{length:t},i=0,r=!1;function c(){const l=Math.min(i+e,o.length);for(let u=i;u<l&&!r;u++)s(o[u],u);i=l,!r&&i<o.length?setTimeout(c):n&&n(r)}function a(){r=!0}return o.length>0?setTimeout(c):n&&n(r),a}async function F(t,e){return new Promise(s=>{e||(e=document);const n=e.createElement("script");n.src=t,n.addEventListener("load",()=>s(!0)),n.addEventListener("error",()=>s(!1)),e.body.append(n)})}async function p(t,e){return new Promise(s=>{e||(e=document);const n=e.createElement("link");n.rel="stylesheet",n.href=t,n.addEventListener("load",()=>s(!0)),n.addEventListener("error",()=>s(!1)),e.head.append(n)})}function $(t){let e=!1;const s=document.createElement("textarea");return s.style.position="absolute",document.body.appendChild(s),s.value=t,s.select(),document.execCommand&&(e=document.execCommand("copy")),document.body.removeChild(s),e}function g(t,e){let s=document.createElement("a");s.style.display="none",s.href=t,s.setAttribute("download",e||""),document.body.appendChild(s),s.click(),document.body.removeChild(s)}function j(t,e){const s=t.headers["content-disposition"];let n=e;if(s){let i=t.headers["content-disposition"].split(";");i=i.at(-1)?.split("''")??[],i.length===2&&(n=decodeURI(i.at(-1)))}const o=URL.createObjectURL(new Blob([t.data]));g(o,n)}async function H(t,e,s,n,o=!1){const i=document.createElement("iframe");o?i.setAttribute("style","position:absolute;width:100%;height:100%;left:0;top:0;border:none"):i.setAttribute("style","position:absolute;width:0;height:0;left:-500;top:-500;border:none"),document.body.appendChild(i);const r=i.contentWindow?.document;if(r){if(r.open(),n){let c;typeof n=="string"?c=n==="A4X"?210:297:c=n;const a=Math.round(c*480/127);r.write("<style>body{width:"+a+"px}</style>")}e&&r.write("<style>"+e+"</style>"),r.write('<div class="appContainer">'+t+"</div>"),r.close(),s&&await Promise.all(s.map(c=>p(c,r))),o||i.contentWindow.addEventListener("afterprint",()=>{document.body.removeChild(i)}),i.contentWindow.focus(),i.contentWindow.print()}}function Y(t,e){return new Promise(s=>{const n=document.createElement("input");n.type="file",n.accept=t,n.multiple=e,n.addEventListener("change",o=>{s(e?n.files===null?[]:Array.from(n.files):n.files?.[0]||null)}),n.click(),document.addEventListener("mousemove",()=>{s(null)},{once:!0})})}function U(t,e,s="children"){for(let n=0;n<t.length;n++){const o=t[n];if(e(o))return o;{const i=o[s];if(i){const r=y(i,e,o,s);if(r)return r}}}}function y(t,e,s,n="children"){for(let o=0;o<t.length;o++){const i=t[o];if(e(i,s))return i;{const r=i[n];if(r){const c=y(r,e,i,n);if(c)return c}}}}function W(t,e,s="children"){for(let n=0;n<t.length;n++){const o=t[n];e(o);const i=o[s];i&&v(i,e,o,s)}}function v(t,e,s,n="children"){for(let o=0;o<t.length;o++){const i=t[o];e(i,s);const r=i[n];r&&v(r,e,i,n)}}function G(t,e,s="children"){const n=[];for(let o=0;o<t.length;o++){const i=t[o],r=i[s],c=e(i);let a;r?a=w(r,e,i,s):a=r,c[s]=a,n.push(c)}return n}function w(t,e,s,n="children"){const o=[];for(let i=0;i<t.length;i++){const r=t[i],c=r[n],a=e(r,s);let l;c?l=w(c,e,r,n):l=c,a[n]=l,o.push(a)}return o}async function B(t,e,s,n,o,i,r){const c=t.getContext("2d");if(c){const a=c.getImageData(e,s,n,o),l=document.createElement("canvas");l.width=n,l.height=o;const u=l.getContext("2d");if(u)return u.putImageData(a,0,0),new Promise(f=>{l.toBlob(m=>{f(m||void 0)},i,r)})}}async function N(t,e=!0){return new Promise(s=>{const n=new Image;n.addEventListener("load",()=>s(n)),n.addEventListener("error",()=>s(void 0)),e&&(n.crossOrigin="Anonymous"),n.src=t})}function q(t,e,s,n){const o=document.createElement("canvas"),i=o.getContext("2d");if(i){const{width:r,height:c}=t;let a=r,l=c;const u=Math.min(r,c);if(u!==e){const f=e/u;a=Math.round(r*f),l=Math.round(c*f)}return o.width=a,o.height=l,i.drawImage(t,0,0,a,l),new Promise(f=>{o.toBlob(m=>{f(m||void 0)},s,n)})}}function b(t,e){t[e]=t[t.length-1],t.pop()}function V(t,e){const s=new Map;for(let n=0;n<t.length;n++){const o=e(t[n],n),i=s.get(o);i?i.push(t[n]):s.set(o,[t[n]])}return s}class E{#t;err;data;isSuccess;constructor(e,s,n,o){this.data=e,this.#t=n,this.err=s,this.isSuccess=o}getInfo(){if(this.data)return this.#t(this.data)}}class L{#t;addEventListener(e,s){this.#t===void 0&&(this.#t={}),this.#t[e]===void 0&&(this.#t[e]=[]),this.#t[e].indexOf(s)===-1&&this.#t[e].push(s)}hasEventListener(e,s){return this.#t===void 0?!1:this.#t[e]!==void 0&&this.#t[e].indexOf(s)!==-1}removeEventListener(e,s){if(this.#t===void 0)return;const n=this.#t[e];if(n!==void 0){const o=n.indexOf(s);o!==-1&&b(n,o)}}dispatchEvent(e){if(this.#t===void 0)return;const s=this.#t[e.type];if(s!==void 0){Object.defineProperty(e,"target",{configurable:!0,enumerable:!0,value:this});const n=s.slice(0);for(let o=0,i=n.length;o<i;o++)n[o].call(this,e)}}}class z extends L{#t;#e;constructor(e,s){super(),this.#t=e,this.#e=s}async async(e,s=!1){return e.then(n=>new E(n,void 0,this.#t,this.#e(n))).catch(n=>{if(!s){let o;typeof n=="string"?o=n:typeof n.message=="string"?o=n.message:o="unknown error",this.showMessage(o)}return this.dispatchEvent({type:"error",error:n}),new E(void 0,n,this.#t,!1)})}showMessage(e){console.error(e)}}class J{#t=null;#e;#n=null;#s;#i;#o;constructor(e,s,n,o){this.#e=e,this.#s=n,this.#i=s??!1,this.#o=o}#r=()=>{this.cancelReConnect(),this.#n=setInterval(()=>{this.connect()},1e4)};connect(){this.#t||(this.#t=new WebSocket(this.#e),this.#t.addEventListener("open",()=>{this.cancelReConnect()}),this.#t.addEventListener("close",this.#r),this.#i?this.#t.addEventListener("message",e=>{let s="";if(this.#o&&(s=this.#o(e),!s))return;let n;try{n=JSON.parse(s||e.data)}catch{console.log("\u6570\u636Eparse\u5931\u8D25");return}const o=e;o.parseData=n,this.#s(o)}):this.#t.addEventListener("message",this.#s))}cancelReConnect(){this.#n&&(clearInterval(this.#n),this.#n=null)}close(){this.#t?.removeEventListener("close",this.#r),this.#t?.close(),this.#t=null}}function Q(t,e){return`${typeof t=="object"?t.constructor.name:t.name}\u7C7B\u4E2D\u7684${e.toString()}\u65B9\u6CD5\u4E2D\uFF1A`}function X(t,e,s){return t[e].toString().match(/\(.*\)/)[0].slice(1,-1).replace(/\/\*.*\*\//,"").split(",")[s].trim()}function Z(t){return Array.isArray(t)?t[0]:t}function h(t,e="\u6821\u9A8C\u5931\u8D25\uFF01",s=!1){return function(n,o,i,r){let c=!0,a=[];for(let l=0;l<n.length;l++){const u=n[l];(u.index<r.length||s)&&(t(u.index<r.length?r[u.index]:void 0,u)||(c=!1,a.push(`\u7B2C${u.index+1}\u4E2A\u53C2\u6570${u.name}\uFF0C${typeof e=="string"?e:e(u)}`)))}if(!c)throw`${Q(o,i)}${a.join("\uFF1B")}\uFF01`}}const d=new Map;d.set("required",h(t=>t!==void 0,"\u662F\u5FC5\u987B\u7684",!0)),d.set("number",h(t=>Number.isFinite(t),"\u5FC5\u987B\u662F\u6570\u5B57")),d.set("string",h(t=>typeof t=="string","\u5FC5\u987B\u662F\u5B57\u7B26\u4E32")),d.set("boolean",h(t=>t===!0||t===!1,"\u5FC5\u987B\u662F\u5E03\u5C14\u503C")),d.set("function",h(t=>typeof t=="function","\u5FC5\u987B\u662F\u51FD\u6570")),d.set("array",h(t=>Array.isArray(t),"\u5FC5\u987B\u662F\u6570\u7EC4")),d.set("date",h(t=>t instanceof Date&&!isNaN(t.valueOf()),"\u5FC5\u987B\u662F\u65E5\u671F")),d.set("dom",h(t=>t instanceof HTMLElement,"\u5FC5\u987B\u662FHTMLElement")),d.set("map",h(t=>t instanceof Map,"\u5FC5\u987B\u662FMap\u7C7B\u578B")),d.set("regExp",h(t=>t instanceof RegExp,"\u5FC5\u987B\u662F\u6B63\u5219\u8868\u8FBE\u5F0F")),d.set("symbol",h(t=>typeof t=="symbol","\u5FC5\u987B\u662FSymbol")),d.set("asyncFunction",h(t=>typeof t=="function"&&t.constructor.name==="AsyncFunction","\u5FC5\u987B\u662F\u5F02\u6B65\u51FD\u6570")),d.set("instanceof",h((t,e)=>t instanceof e.instance,t=>`\u5FC5\u987B\u662F[${t.instance.name}]\u7684\u5B9E\u4F8B\u7C7B\u578B`)),d.set("custom",h((t,e)=>e.custom(t),t=>t.customText||"\u81EA\u5B9A\u4E49\u6821\u9A8C\u5931\u8D25"));class _{#t=new Map;param(...e){return(s,n,o)=>{const i=this.#t.get(n)||new Map;for(let r=0;r<e.length;r++){let c=Z(e[r]);const a=i.get(c)||[];a.unshift({name:X(s,n,o),index:o,instance:c==="instanceof"?e[r][1]:void 0,custom:c==="custom"?e[r][1]:void 0,customText:c==="custom"&&e[r].length>2?e[r][2]:void 0}),i.set(c,a)}this.#t.set(n,i)}}fun(){return(e,s,n)=>{const o=n.value,i=this.#t.get(s);n.value=function(){if(i)for(const[r,c]of i)d.get(r)(c,e,s,arguments);return o.apply(this,arguments)}}}}export{z as AxiosTo,L as EventDispatcher,S as StrDate,R as StrDateTime,D as StrTime,_ as Verify,T as VueInjectHelper,J as WebSocketLinker,V as arrGroupBy,b as arrRemove,$ as docCopyText,j as docDownLoadSteamFile,g as docDownloadFile,p as docLoadCss,F as docLoadScript,Y as docOpenFileDialog,H as docPrintDom,P as funDebounce,k as funIdleRun,O as funTaskRun,B as imgGetCanvasRect,N as imgLoad,q as imgResize,A as strGetStringExtension,C as strGetUrlParam,x as strInsertAt,M as strReplaceHost,U as treeFind,W as treeForEach,G as treeMap,I as vueGetParamFromQuery};
