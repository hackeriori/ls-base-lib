function x(t,n,s){return t.slice(0,n)+s+t.slice(n)}function A(t,n="."){const s=t.lastIndexOf(n)+1;return s&&t.substring(s)||void 0}function C(t,n){const s=n||location.search;return new URLSearchParams(s).get(t)}function M(t,n){let s;try{s=new URL(n)}catch{return console.warn(`\u88AB\u66FF\u6362\u7684\u57DF\u540D\u662F\u9519\u8BEF\u7684\uFF1A${n}`),t}let e=new URL(t,n);return e.host=s.host,e.protocol=s.protocol,e.toString()}const R="YYYY-MM-DD HH:mm:ss",D="HH:mm:ss",S="YYYY-MM-DD";function I(t,n){let s=t[n];return s?Array.isArray(s)&&(s=s.filter(e=>e),s.length===0)?null:Array.isArray(s)?s[0]:s:null}class T{injects=[];push(n){return this.injects.push(n),this}getArray(){return this.injects}}function P(t,n,s=!1,e){let o=null,i=!1;const r=function(...c){if(o&&clearTimeout(o),s&&!i){const a=t.apply(this,c);e&&e(a),i=!0}o=setTimeout(()=>{const a=t.apply(this,c);e&&e(a),o=null},n)};return r.cancel=function(){o&&clearTimeout(o),o=null},r}function k(t,n,s){let e=Array.isArray(t)?t:{length:t},o=0,i=!1;function r(a){for(;a.timeRemaining()>0&&o<e.length&&!i;)n(e[o],o),o++;!i&&o<e.length?requestIdleCallback(r):s&&s(i)}function c(){i=!0}return e.length>0?requestIdleCallback(r):s&&s(i),c}function O(t,n,s,e){let o=Array.isArray(t)?t:{length:t},i=0,r=!1;function c(){const l=Math.min(i+n,o.length);for(let u=i;u<l&&!r;u++)s(o[u],u);i=l,!r&&i<o.length?setTimeout(c):e&&e(r)}function a(){r=!0}return o.length>0?setTimeout(c):e&&e(r),a}async function F(t,n){return new Promise(s=>{n||(n=document);const e=n.createElement("script");e.src=t,e.addEventListener("load",()=>s(!0)),e.addEventListener("error",()=>s(!1)),n.body.append(e)})}async function p(t,n){return new Promise(s=>{n||(n=document);const e=n.createElement("link");e.rel="stylesheet",e.href=t,e.addEventListener("load",()=>s(!0)),e.addEventListener("error",()=>s(!1)),n.head.append(e)})}function $(t){let n=!1;const s=document.createElement("textarea");return s.style.position="absolute",document.body.appendChild(s),s.value=t,s.select(),document.execCommand&&(n=document.execCommand("copy")),document.body.removeChild(s),n}function g(t,n){let s=document.createElement("a");s.style.display="none",s.href=t,s.setAttribute("download",n||""),document.body.appendChild(s),s.click(),document.body.removeChild(s)}function j(t,n){const s=t.headers["content-disposition"];let e=n;if(s){let i=t.headers["content-disposition"].split(";");i=i.at(-1)?.split("''")??[],i.length===2&&(e=decodeURI(i.at(-1)))}const o=URL.createObjectURL(new Blob([t.data]));g(o,e)}async function H(t,n,s,e,o=!1){const i=document.createElement("iframe");o?i.setAttribute("style","position:absolute;width:100%;height:100%;left:0;top:0;border:none"):i.setAttribute("style","position:absolute;width:0;height:0;left:-500;top:-500;border:none"),document.body.appendChild(i);const r=i.contentWindow?.document;if(r){if(r.open(),e){let c;typeof e=="string"?c=e==="A4X"?210:297:c=e;const a=Math.round(c*480/127);r.write("<style>body{width:"+a+"px}</style>")}n&&r.write("<style>"+n+"</style>"),r.write('<div class="appContainer">'+t+"</div>"),r.close(),s&&await Promise.all(s.map(c=>p(c,r))),o||i.contentWindow.addEventListener("afterprint",()=>{document.body.removeChild(i)}),i.contentWindow.focus(),i.contentWindow.print()}}function Y(t,n){return new Promise(s=>{const e=document.createElement("input");e.type="file",e.accept=t,e.multiple=n,e.addEventListener("change",o=>{s(n?e.files===null?[]:Array.from(e.files):e.files?.[0]||null)}),e.click(),document.addEventListener("mousemove",()=>{s(null)},{once:!0})})}function U(t,n,s="children"){for(let e=0;e<t.length;e++){const o=t[e];if(n(o))return o;{const i=o[s];if(i){const r=y(i,n,o,s);if(r)return r}}}}function y(t,n,s,e="children"){for(let o=0;o<t.length;o++){const i=t[o];if(n(i,s))return i;{const r=i[e];if(r){const c=y(r,n,i,e);if(c)return c}}}}function W(t,n,s="children"){for(let e=0;e<t.length;e++){const o=t[e];n(o);const i=o[s];i&&v(i,n,o,s)}}function v(t,n,s,e="children"){for(let o=0;o<t.length;o++){const i=t[o];n(i,s);const r=i[e];r&&v(r,n,i,e)}}function G(t,n,s="children"){const e=[];for(let o=0;o<t.length;o++){const i=t[o],r=i[s],c=n(i);let a;r?a=w(r,n,i,s):a=r,c[s]=a,e.push(c)}return e}function w(t,n,s,e="children"){const o=[];for(let i=0;i<t.length;i++){const r=t[i],c=r[e],a=n(r,s);let l;c?l=w(c,n,r,e):l=c,a[e]=l,o.push(a)}return o}async function B(t,n,s,e,o,i,r){const c=t.getContext("2d");if(c){const a=c.getImageData(n,s,e,o),l=document.createElement("canvas");l.width=e,l.height=o;const u=l.getContext("2d");if(u)return u.putImageData(a,0,0),new Promise(f=>{l.toBlob(m=>{f(m||void 0)},i,r)})}}async function N(t,n=!0){return new Promise(s=>{const e=new Image;e.addEventListener("load",()=>s(e)),e.addEventListener("error",()=>s(void 0)),n&&(e.crossOrigin="Anonymous"),e.src=t})}function q(t,n,s,e){const o=document.createElement("canvas"),i=o.getContext("2d");if(i){const{width:r,height:c}=t;let a=r,l=c;const u=Math.min(r,c);if(u!==n){const f=n/u;a=Math.round(r*f),l=Math.round(c*f)}return o.width=a,o.height=l,i.drawImage(t,0,0,a,l),new Promise(f=>{o.toBlob(m=>{f(m||void 0)},s,e)})}}function b(t,n){t[n]=t[t.length-1],t.pop()}function V(t,n){const s=new Map;for(let e=0;e<t.length;e++){const o=n(t[e],e),i=s.get(o);i?i.push(t[e]):s.set(o,[t[e]])}return s}class E{#t;err;data;isSuccess;constructor(n,s,e,o){this.data=n,this.#t=e,this.err=s,this.isSuccess=o}getInfo(){if(this.data)return this.#t(this.data)}}class L{#t;addEventListener(n,s){this.#t===void 0&&(this.#t={}),this.#t[n]===void 0&&(this.#t[n]=[]),this.#t[n].indexOf(s)===-1&&this.#t[n].push(s)}hasEventListener(n,s){return this.#t===void 0?!1:this.#t[n]!==void 0&&this.#t[n].indexOf(s)!==-1}removeEventListener(n,s){if(this.#t===void 0)return;const e=this.#t[n];if(e!==void 0){const o=e.indexOf(s);o!==-1&&b(e,o)}}dispatchEvent(n){if(this.#t===void 0)return;const s=this.#t[n.type];if(s!==void 0){Object.defineProperty(n,"target",{configurable:!0,enumerable:!0,value:this});const e=s.slice(0);for(let o=0,i=e.length;o<i;o++)e[o].call(this,n)}}}class z extends L{#t;#e;constructor(n,s){super(),this.#t=n,this.#e=s}async async(n,s=!1){return n.then(e=>new E(e,void 0,this.#t,this.#e(e))).catch(e=>{if(!s){let o;typeof e=="string"?o=e:typeof e.message=="string"?o=e.message:o="unknown error",this.showMessage(o)}return this.dispatchEvent({type:"error",error:e}),new E(void 0,e,this.#t,!1)})}showMessage(n){console.error(n)}}class J{#t=null;#e;#n=null;#s;#i;#o;constructor(n,s,e,o){this.#e=n,this.#s=e,this.#i=s??!1,this.#o=o}#r=()=>{this.cancelReConnect(),this.#n=setInterval(()=>{this.connect()},1e4)};connect(){this.#t||(this.#t=new WebSocket(this.#e),this.#t.addEventListener("open",()=>{this.cancelReConnect()}),this.#t.addEventListener("close",this.#r),this.#i?this.#t.addEventListener("message",n=>{let s="";if(this.#o&&(s=this.#o(n),!s))return;let e;try{e=JSON.parse(s||n.data)}catch{console.log("\u6570\u636Eparse\u5931\u8D25");return}const o=n;o.parseData=e,this.#s(o)}):this.#t.addEventListener("message",this.#s))}cancelReConnect(){this.#n&&(clearInterval(this.#n),this.#n=null)}close(){this.#t?.removeEventListener("close",this.#r),this.#t?.close(),this.#t=null}}function Q(t,n){return`${typeof t=="object"?t.constructor.name:t.name}\u7C7B\u4E2D\u7684${n.toString()}\u65B9\u6CD5\u4E2D\uFF1A`}function X(t,n,s){return t[n].toString().match(/\(.*\)/)[0].slice(1,-1).replace(/\/\*.*\*\//,"").split(",")[s].trim()}function Z(t){return Array.isArray(t)?t[0]:t}function h(t,n="\u6821\u9A8C\u5931\u8D25\uFF01",s=!1){return function(e,o,i,r){let c=!0,a=[];for(let l=0;l<e.length;l++){const u=e[l];(u.index<r.length||s)&&(t(u.index<r.length?r[u.index]:void 0,u)||(c=!1,a.push(`\u7B2C${u.index+1}\u4E2A\u53C2\u6570${u.name}\uFF0C${typeof n=="string"?n:n(u)}`)))}if(!c)throw`${Q(o,i)}${a.join("\uFF1B")}\uFF01`}}const d=new Map;d.set("required",h(t=>t!==void 0,"\u662F\u5FC5\u987B\u7684",!0)),d.set("number",h(t=>Number.isFinite(t),"\u5FC5\u987B\u662F\u6570\u5B57")),d.set("string",h(t=>typeof t=="string","\u5FC5\u987B\u662F\u5B57\u7B26\u4E32")),d.set("boolean",h(t=>t===!0||t===!1,"\u5FC5\u987B\u662F\u5E03\u5C14\u503C")),d.set("function",h(t=>typeof t=="function","\u5FC5\u987B\u662F\u51FD\u6570")),d.set("array",h(t=>Array.isArray(t),"\u5FC5\u987B\u662F\u6570\u7EC4")),d.set("date",h(t=>t instanceof Date&&!isNaN(t.valueOf()),"\u5FC5\u987B\u662F\u65E5\u671F")),d.set("dom",h(t=>t instanceof HTMLElement,"\u5FC5\u987B\u662FHTMLElement")),d.set("map",h(t=>t instanceof Map,"\u5FC5\u987B\u662FMap\u7C7B\u578B")),d.set("regExp",h(t=>t instanceof RegExp,"\u5FC5\u987B\u662F\u6B63\u5219\u8868\u8FBE\u5F0F")),d.set("symbol",h(t=>typeof t=="symbol","\u5FC5\u987B\u662FSymbol")),d.set("asyncFunction",h(t=>typeof t=="function"&&t.constructor.name==="AsyncFunction","\u5FC5\u987B\u662F\u5F02\u6B65\u51FD\u6570")),d.set("instanceof",h((t,n)=>t instanceof n.instance,t=>`\u5FC5\u987B\u662F[${t.instance.name}]\u7684\u5B9E\u4F8B\u7C7B\u578B`)),d.set("custom",h((t,n)=>n.custom(t),t=>t.customText||"\u81EA\u5B9A\u4E49\u6821\u9A8C\u5931\u8D25"));class _{#t=new Map;param(...n){return(s,e,o)=>{const i=this.#t.get(e)||new Map;for(let r=0;r<n.length;r++){let c=Z(n[r]);const a=i.get(c)||[];a.unshift({name:X(s,e,o),index:o,instance:c==="instanceof"?n[r][1]:void 0,custom:c==="custom"?n[r][1]:void 0,customText:c==="custom"&&n[r].length>2?n[r][2]:void 0}),i.set(c,a)}this.#t.set(e,i)}}fun(){return(n,s,e)=>{const o=e.value,i=this.#t.get(s);e.value=function(){if(console.log(e),i)for(const[r,c]of i)d.get(r)(c,n,s,arguments);return o.apply(this,arguments)}}}}export{z as AxiosTo,L as EventDispatcher,S as StrDate,R as StrDateTime,D as StrTime,_ as Verify,T as VueInjectHelper,J as WebSocketLinker,V as arrGroupBy,b as arrRemove,$ as docCopyText,j as docDownLoadSteamFile,g as docDownloadFile,p as docLoadCss,F as docLoadScript,Y as docOpenFileDialog,H as docPrintDom,P as funDebounce,k as funIdleRun,O as funTaskRun,B as imgGetCanvasRect,N as imgLoad,q as imgResize,A as strGetStringExtension,C as strGetUrlParam,x as strInsertAt,M as strReplaceHost,U as treeFind,W as treeForEach,G as treeMap,I as vueGetParamFromQuery};
